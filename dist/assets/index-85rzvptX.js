import{b as P,E as M,_ as D}from"./index.vue_vue_type_script_setup_true_lang-CDkv6M9l.js";import{d as I,j as f,a as G,l as E,x as U,o as u,f as p,e as a,F as S,t as g,n as i,I as d,y as F,z as Q,p as N,i as O,_ as B,b as A,w as x,k as j,q as H,g as e,h as w,r as R,D as z}from"./index-Cl-6axvi.js";import{_ as J}from"./WithSidebar.vue_vue_type_style_index_0_lang-Dp1SVAtl.js";import"./ExpandedDropdown-Dyksbmcr.js";const Y=[{label:"Multiple Choice",value:"multiple-choice"},{label:"Multiple Answer",value:"multiple-answer"},{label:"Text Answer",value:"text-answer"},{label:"Number Answer",value:"number-answer"},{label:"True/False",value:"true-false"},{label:"Fill in the Blank",value:"fill-in-the-blank"},{label:"Matching",value:"matching"},{label:"Ordering",value:"ordering"},{label:"Flashcard",value:"flashcard"}],$=v=>(N("data-v-64e71c0f"),v=v(),O(),v),L={key:0},K=$(()=>a("p",null,"Your share link:",-1)),W=["value"],X={key:1},Z=$(()=>a("p",null," To share this course, click the button below. This will create a gist on GitHub with the course data. ",-1)),q={class:"options"},ee=$(()=>a("h1",null,"GitHub Gists PAT",-1)),le=$(()=>a("p",null," To use this feature, you need to provide a GitHub Gists PAT. This is used to create gists for sharing courses. ",-1)),se=I({__name:"ShareModal",setup(v,{expose:V}){const m=f(!1),r=f(""),b=f(!1),l=f(!1),y=f(),h=G(),k=f(""),t=f();E(()=>{const c=U.pat();m.value=!!c});const s=c=>{var n,_;(n=t.value)==null||n.showModal(),c.id!==((_=y.value)==null?void 0:_.id)&&(b.value=!1,l.value=!1,r.value=""),y.value=c},C=()=>{U.setPat(k.value),m.value=!0},o=async()=>{const c=y.value;if(!c)return;const n=JSON.parse(JSON.stringify(c));b.value||(n.score={}),r.value=await h.shareCourse(n,l.value)??""};return V({open:s}),(c,n)=>(u(),p("dialog",{ref_key:"dialog",ref:t},[a("span",{class:"material-symbols-rounded close",onClick:n[0]||(n[0]=_=>{var T;return(T=t.value)==null?void 0:T.close()})}," close "),m.value&&y.value?(u(),p(S,{key:0},[a("h1",null,'Share "'+g(y.value.title)+'"',1),r.value?(u(),p("div",L,[K,a("input",{type:"text",readonly:"",value:r.value},null,8,W)])):(u(),p("div",X,[Z,a("div",q,[i(P,{label:"Include Progress",modelValue:b.value,"onUpdate:modelValue":n[1]||(n[1]=_=>b.value=_)},null,8,["modelValue"]),i(P,{label:"Public Gist",modelValue:l.value,"onUpdate:modelValue":n[2]||(n[2]=_=>l.value=_)},null,8,["modelValue"])]),i(d,{type:"action-green",icon:"share",label:"Share",onClick:o})]))],64)):(u(),p(S,{key:1},[ee,le,F(a("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=_=>k.value=_),placeholder:"Enter your PAT here"},null,512),[[Q,k.value]]),i(d,{type:"action-green",icon:"done",label:"Save",disabled:!k.value.length,onClick:C},null,8,["disabled"])],64))],512))}}),te=B(se,[["__scopeId","data-v-64e71c0f"]]),oe=v=>(N("data-v-f03729f6"),v=v(),O(),v),ae={class:"wrap"},ne={class:"editor"},ie={key:0,class:"meta"},re={class:"muted"},ue={class:"card"},de=oe(()=>a("h3",null,"Progress",-1)),ce={class:"progress"},pe={class:"bar"},ve=["value"],_e={class:"muted"},he={class:"actions"},fe={key:1,class:"questions"},me={class:"question-wrapper"},ye={class:"header"},ge={class:"left"},be={class:"muted"},ke={class:"middle"},Ce={class:"right"},we=["onClick"],$e={key:0,class:"content"},Ve={class:"actions"},xe=I({__name:"index",setup(v){const V=j(),m=H(),r=G(),b=V.params.id,l=r.courses.find(t=>t.id===b);l||m.push("/");const y=(t,s)=>{if(t.type===s)return!1;let o=!1;return typeof t.solution=="array"?o=t.solution.length>0:typeof t.solution=="object"?o=Object.keys(t.solution).length>0:o=!!t.solution,o&&!confirm("Are you sure you want to change the question type?")?!1:(s==="multiple-choice"?(t.options=[],t.solution=-1):s==="multiple-answer"?(t.options=[],t.solution=[]):s==="ordering"?t.solution=[]:s==="fill-in-the-blank"?t.solution=[]:s==="matching"?t.solution={}:t.solution="",t.type=s,!0)},h=f([]),k=t=>{h.value.includes(t)?h.value=h.value.filter(s=>s!==t):h.value.push(t)};return(t,s)=>(u(),A(J,null,{default:x(()=>{var C;return[i(te,{ref:"shareModal"},null,512),a("div",ae,[a("div",ne,[e(l)?(u(),p("div",ie,[i(M,{modelValue:e(l).title,"onUpdate:modelValue":s[0]||(s[0]=o=>e(l).title=o),class:"h1"},{default:x(()=>[a("h1",null,g(e(l).title),1)]),_:1},8,["modelValue"]),i(M,{modelValue:e(l).description,"onUpdate:modelValue":s[1]||(s[1]=o=>e(l).description=o)},{default:x(()=>[a("p",re,g(e(l).description),1)]),_:1},8,["modelValue"]),a("div",ue,[de,i(d,{icon:"replay",label:"Reset",onClick:s[2]||(s[2]=o=>e(r).resetProgress(e(l)))}),a("div",ce,[a("div",pe,[a("progress",{value:e(r).progress(e(l)),max:"100"},null,8,ve)]),a("span",_e,g(e(r).progress(e(l)))+"%",1)])]),a("div",he,[(C=e(l).remote)!=null&&C.length?(u(),A(d,{key:0,icon:"file_download",label:"Pull",onClick:s[3]||(s[3]=o=>e(r).pull({course:e(l)}))})):w("",!0),i(d,{icon:"file_upload",label:"Share",onClick:s[4]||(s[4]=o=>t.$refs.shareModal.open(e(l)))}),i(d,{icon:"school",label:"Start",type:"action-green",onClick:s[5]||(s[5]=o=>e(m).push(`/quiz/${e(l).id}`))}),i(d,{icon:"delete",label:"Delete",type:"action-red",onClick:s[6]||(s[6]=o=>e(r).removeCourse(e(l).id)&&e(m).push("/courses"))})])])):w("",!0),e(l)?(u(),p("div",fe,[(u(!0),p(S,null,R(e(l).questions,(o,c)=>(u(),p("div",me,[a("div",ye,[a("div",ge,[i(d,{icon:"arrow_upward",onClick:n=>e(r).moveQuestionUp(e(l),o)},null,8,["onClick"]),a("span",be,g(c+1)+" / "+g(e(l).questions.length),1),i(d,{icon:"arrow_downward",onClick:n=>e(r).moveQuestionDown(e(l),o)},null,8,["onClick"])]),a("div",ke,[i(z,{options:e(Y),modelValue:o.type,"onUpdate:modelValue":n=>o.type=n,onChange:n=>y(o,n),label:"type"},null,8,["options","modelValue","onUpdate:modelValue","onChange"]),i(d,{icon:"delete",type:"action-red",onClick:n=>e(l).questions.splice(e(l).questions.indexOf(o),1)},null,8,["onClick"])]),a("div",Ce,[a("span",{class:"muted material-symbols-rounded cursor-pointer",onClick:n=>k(o.id)},g(h.value.includes(o.id)?"expand_less":"expand_more"),9,we)])]),h.value.includes(o.id)?w("",!0):(u(),p("div",$e,[i(D,{question:o,editable:""},null,8,["question"])]))]))),256)),a("div",Ve,[i(d,{icon:"add",label:"Add",type:"action-green",onClick:s[7]||(s[7]=o=>e(l).questions.push({id:Math.random().toString(36).substring(2,9),type:"text-answer",title:"",question:"",solution:""}))})])])):w("",!0)])])]}),_:1}))}}),Ue=B(xe,[["__scopeId","data-v-f03729f6"]]);export{Ue as default};
