import{b as P,E as M,_ as O}from"./index.vue_vue_type_script_setup_true_lang-e3c7d85b.js";import{d as A,j as m,a as I,l as B,x as U,o as c,f as p,e as t,F as S,t as g,q as n,I as u,y as E,z as F,p as D,i as G,_ as N,k as Q,n as j,b as H,w as x,g as e,h as V,r as R,D as z}from"./index-107e7e06.js";import{_ as J}from"./WithSidebar.vue_vue_type_style_index_0_lang-eea5a590.js";import"./ExpandedDropdown-a33dc4d2.js";const Y=[{label:"Multiple Choice",value:"multiple-choice"},{label:"Multiple Answer",value:"multiple-answer"},{label:"Text Answer",value:"text-answer"},{label:"Number Answer",value:"number-answer"},{label:"True/False",value:"true-false"},{label:"Fill in the Blank",value:"fill-in-the-blank"},{label:"Matching",value:"matching"},{label:"Ordering",value:"ordering"},{label:"Flashcard",value:"flashcard"}],C=_=>(D("data-v-b07f4794"),_=_(),G(),_),L={key:0},K=C(()=>t("p",null,"Your share link:",-1)),W=["value"],X={key:1},Z=C(()=>t("p",null," To share this course, click the button below. This will create a gist on GitHub with the course data. ",-1)),q={class:"options"},ee=C(()=>t("h1",null,"GitHub Gists PAT",-1)),se=C(()=>t("p",null," To use this feature, you need to provide a GitHub Gists PAT. This is used to create gists for sharing courses. ",-1)),le=A({__name:"ShareModal",setup(_,{expose:$}){const b=m(!1),d=m(""),k=m(!1),s=m(!1),y=m(),h=I(),w=m(""),o=m();B(()=>{const i=U.pat();b.value=!!i});const l=i=>{var r,v;(r=o.value)==null||r.showModal(),i.id!==((v=y.value)==null?void 0:v.id)&&(k.value=!1,s.value=!1,d.value=""),y.value=i},a=()=>{U.setPat(w.value),b.value=!0},f=async()=>{const i=y.value;if(!i)return;const r=JSON.parse(JSON.stringify(i));k.value||(r.score={}),d.value=await h.shareCourse(r,s.value)};return $({open:l}),(i,r)=>(c(),p("dialog",{ref_key:"dialog",ref:o},[t("span",{class:"material-symbols-rounded close",onClick:r[0]||(r[0]=v=>{var T;return(T=o.value)==null?void 0:T.close()})}," close "),b.value&&y.value?(c(),p(S,{key:0},[t("h1",null,'Share "'+g(y.value.title)+'"',1),d.value?(c(),p("div",L,[K,t("input",{type:"text",readonly:"",value:d.value},null,8,W)])):(c(),p("div",X,[Z,t("div",q,[n(P,{label:"Include Progress",modelValue:k.value,"onUpdate:modelValue":r[1]||(r[1]=v=>k.value=v)},null,8,["modelValue"]),n(P,{label:"Public Gist",modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=v=>s.value=v)},null,8,["modelValue"])]),n(u,{type:"action-green",icon:"share",label:"Share",onClick:f})]))],64)):(c(),p(S,{key:1},[ee,se,E(t("input",{type:"text","onUpdate:modelValue":r[3]||(r[3]=v=>w.value=v),placeholder:"Enter your PAT here"},null,512),[[F,w.value]]),n(u,{type:"action-green",icon:"done",label:"Save",disabled:!w.value.length,onClick:a},null,8,["disabled"])],64))],512))}});const oe=N(le,[["__scopeId","data-v-b07f4794"]]),te=_=>(D("data-v-43ceb30d"),_=_(),G(),_),ae={class:"wrap"},ne={class:"editor"},ie={key:0,class:"meta"},re={class:"muted"},de={class:"card"},ue=te(()=>t("h3",null,"Progress",-1)),ce={class:"progress"},pe={class:"bar"},_e=["value"],ve={class:"muted"},he={class:"actions"},fe={key:1,class:"questions"},me={class:"question-wrapper"},be={class:"header"},ye={class:"left"},ge={class:"muted"},ke={class:"middle"},we={class:"right"},Ce=["onClick"],$e={key:0,class:"content"},xe={class:"actions"},Ve=A({__name:"index",setup(_){const $=Q(),b=j(),d=I(),k=$.params.id,s=d.courses.find(o=>o.id===k);s||b.push("/");const y=(o,l)=>{if(o.type===l)return!1;let f=!1;return typeof o.solution=="array"?f=o.solution.length>0:typeof o.solution=="object"?f=Object.keys(o.solution).length>0:f=!!o.solution,f&&!confirm("Are you sure you want to change the question type?")?!1:(l==="multiple-choice"?(o.options=[],o.solution=-1):l==="multiple-answer"?(o.options=[],o.solution=[]):l==="ordering"?o.solution=[]:l==="fill-in-the-blank"?o.solution=[]:l==="matching"?o.solution={}:o.solution="",o.type=l,!0)},h=m([]),w=o=>{h.value.includes(o)?h.value=h.value.filter(l=>l!==o):h.value.push(o)};return(o,l)=>(c(),H(J,null,{default:x(()=>[n(oe,{ref:"shareModal"},null,512),t("div",ae,[t("div",ne,[e(s)?(c(),p("div",ie,[n(M,{modelValue:e(s).title,"onUpdate:modelValue":l[0]||(l[0]=a=>e(s).title=a),class:"h1"},{default:x(()=>[t("h1",null,g(e(s).title),1)]),_:1},8,["modelValue"]),n(M,{modelValue:e(s).description,"onUpdate:modelValue":l[1]||(l[1]=a=>e(s).description=a)},{default:x(()=>[t("p",re,g(e(s).description),1)]),_:1},8,["modelValue"]),t("div",de,[ue,n(u,{icon:"replay",label:"Reset",onClick:l[2]||(l[2]=a=>e(d).resetProgress(e(s)))}),t("div",ce,[t("div",pe,[t("progress",{value:e(d).progress(e(s)),max:"100"},null,8,_e)]),t("span",ve,g(e(d).progress(e(s)))+"%",1)])]),t("div",he,[n(u,{icon:"file_download",label:"Download",onClick:l[3]||(l[3]=a=>e(d).downloadCourse(e(s)))}),n(u,{icon:"file_upload",label:"Share",onClick:l[4]||(l[4]=a=>o.$refs.shareModal.open(e(s)))}),n(u,{icon:"school",label:"Start",type:"action-green",onClick:l[5]||(l[5]=a=>e(b).push(`/quiz/${e(s).id}`))}),n(u,{icon:"delete",label:"Delete",type:"action-red",onClick:l[6]||(l[6]=a=>e(d).removeCourse(e(s).id)&&e(b).push("/courses"))})])])):V("",!0),e(s)?(c(),p("div",fe,[(c(!0),p(S,null,R(e(s).questions,(a,f)=>(c(),p("div",me,[t("div",be,[t("div",ye,[n(u,{icon:"arrow_upward",onClick:i=>e(d).moveQuestionUp(e(s),a)},null,8,["onClick"]),t("span",ge,g(f+1)+" / "+g(e(s).questions.length),1),n(u,{icon:"arrow_downward",onClick:i=>e(d).moveQuestionDown(e(s),a)},null,8,["onClick"])]),t("div",ke,[n(z,{options:e(Y),modelValue:a.type,"onUpdate:modelValue":i=>a.type=i,onChange:i=>y(a,i),label:"type"},null,8,["options","modelValue","onUpdate:modelValue","onChange"]),n(u,{icon:"delete",type:"action-red",onClick:i=>e(s).questions.splice(e(s).questions.indexOf(a),1)},null,8,["onClick"])]),t("div",we,[t("span",{class:"muted material-symbols-rounded cursor-pointer",onClick:i=>w(a.id)},g(h.value.includes(a.id)?"expand_less":"expand_more"),9,Ce)])]),h.value.includes(a.id)?V("",!0):(c(),p("div",$e,[n(O,{question:a,editable:""},null,8,["question"])]))]))),256)),t("div",xe,[n(u,{icon:"add",label:"Add",type:"action-green",onClick:l[7]||(l[7]=a=>e(s).questions.push({id:Math.random().toString(36).substring(2,9),type:"text-answer",title:"",question:"",solution:""}))})])])):V("",!0)])])]),_:1}))}});const Ue=N(Ve,[["__scopeId","data-v-43ceb30d"]]);export{Ue as default};
