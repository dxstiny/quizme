import{b as N,E as O,_ as H}from"./index.vue_vue_type_script_setup_true_lang-CM_iPWGw.js";import{d as A,j as g,a as G,l as Q,x as V,c as j,o as c,f as _,e,F as x,t as b,n as i,I as d,h as $,y as R,z,p as I,i as B,_ as E,b as D,w as U,k as Y,q as L,g as l,r as K,D as W}from"./index-bh0uagku.js";import{_ as X}from"./WithSidebar.vue_vue_type_style_index_0_lang-7updZBuT.js";import"./ExpandedDropdown-B3SAcc7I.js";const Z=[{label:"Multiple Choice",value:"multiple-choice"},{label:"Multiple Answer",value:"multiple-answer"},{label:"Text Answer",value:"text-answer"},{label:"Number Answer",value:"number-answer"},{label:"True/False",value:"true-false"},{label:"Fill in the Blank",value:"fill-in-the-blank"},{label:"Matching",value:"matching"},{label:"Ordering",value:"ordering"},{label:"Flashcard",value:"flashcard"}],C=f=>(I("data-v-c8ca8054"),f=f(),B(),f),q={class:"options"},ee={key:0,class:"option"},le=C(()=>e("div",{class:"info"},[e("h3",null,"Update remote"),e("p",null," This course is already shared. Update the remote to share the latest changes. ")],-1)),se={class:"option"},te=C(()=>e("div",{class:"info"},[e("h3",null,"New share"),e("p",null," Share this course for the first time. This will create a new gist on GitHub. ")],-1)),oe={class:"option"},ae=C(()=>e("div",{class:"info"},[e("h3",null,"Download"),e("p",null," Download the course as a JSON file. This can be used to import the course on another device. ")],-1)),ne=C(()=>e("h1",null,"GitHub Gists PAT",-1)),ie=C(()=>e("p",null," To use this feature, you need to provide a GitHub Gists PAT. This is used to create gists for sharing courses. ",-1)),re={key:0},ue=C(()=>e("p",null,"Your share link:",-1)),de=["value"],ce={key:1},pe=C(()=>e("p",null," To share this course, click the button below. This will create a gist on GitHub with the course data. ",-1)),ve={class:"options"},he=A({__name:"ShareModal",setup(f,{expose:T}){const k=g(!1),p=g(""),w=g(!1),o=g(!1),v=g(),h=g(null),S=G(),s=g(""),t=g();Q(()=>{const r=V.pat();k.value=!!r});const y=r=>{var n,u;h.value=null,(n=t.value)==null||n.showModal(),r.id!==((u=v.value)==null?void 0:u.id)&&(w.value=!1,o.value=!1,p.value=""),v.value=r},a=()=>{V.setPat(s.value),k.value=!0},P=async()=>{const r=v.value;if(!r)return;const n=JSON.parse(JSON.stringify(r));w.value||(n.score={},delete n.remote),p.value=await S.shareCourse(n,o.value)??""},m=()=>{var r;S.downloadCourse(v.value),(r=t.value)==null||r.close()},F=()=>{var u;const r=v.value;if(!r)return;const n=JSON.parse(JSON.stringify(r));w.value||(n.score={},delete n.remote),V.update(n,r.remote[0].identifier),(u=t.value)==null||u.close()},J=j(()=>{var n,u;if(!((u=(n=v.value)==null?void 0:n.remote)!=null&&u.length))return!1;const r=v.value.remote[0].identifier;return V.isMine(r)});return T({open:y}),(r,n)=>(c(),_("dialog",{ref_key:"dialog",ref:t},[e("span",{class:"material-symbols-rounded close",onClick:n[0]||(n[0]=u=>{var M;return(M=t.value)==null?void 0:M.close()})}," close "),!h.value&&v.value?(c(),_(x,{key:0},[e("h1",null,'Share "'+b(v.value.title)+'"',1),e("div",q,[J.value?(c(),_("div",ee,[le,i(d,{type:"action-green",icon:"update",label:"Update",onClick:F})])):$("",!0),e("div",se,[te,i(d,{type:"action-green",icon:"share",label:"Share",onClick:n[1]||(n[1]=u=>h.value="gist")})]),e("div",oe,[ae,i(d,{type:"action-green",icon:"download",label:"Download",onClick:m})])])],64)):!k.value&&h.value?(c(),_(x,{key:1},[ne,ie,R(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=u=>s.value=u),placeholder:"Enter your PAT here"},null,512),[[z,s.value]]),i(d,{type:"action-green",icon:"done",label:"Save",disabled:!s.value.length,onClick:a},null,8,["disabled"])],64)):h.value=="gist"&&v.value?(c(),_(x,{key:2},[e("h1",null,'Share "'+b(v.value.title)+'"',1),p.value?(c(),_("div",re,[ue,e("input",{type:"text",readonly:"",value:p.value},null,8,de)])):(c(),_("div",ce,[pe,e("div",ve,[i(N,{label:"Include Progress",modelValue:w.value,"onUpdate:modelValue":n[3]||(n[3]=u=>w.value=u)},null,8,["modelValue"]),i(N,{label:"Public Gist",modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=u=>o.value=u)},null,8,["modelValue"])]),i(d,{type:"action-green",icon:"share",label:"Share",onClick:P})]))],64)):$("",!0)],512))}}),_e=E(he,[["__scopeId","data-v-c8ca8054"]]),fe=f=>(I("data-v-8b61dd85"),f=f(),B(),f),me={class:"wrap"},ge={class:"editor"},ye={key:0,class:"meta"},be={class:"muted"},ke={class:"card"},we=fe(()=>e("h3",null,"Progress",-1)),Ce={class:"progress"},$e={class:"bar"},Se=["value"],Ve={class:"muted"},xe={class:"actions"},Te={key:1,class:"questions"},Pe={class:"question-wrapper"},Ue={class:"header"},Me={class:"left"},Ne={class:"muted"},Oe={class:"middle"},De={class:"right"},Ae=["onClick"],Ge={key:0,class:"content"},Ie={class:"actions"},Be=A({__name:"index",setup(f){const T=Y(),k=L(),p=G(),w=T.params.id,o=p.courses.find(s=>s.id===w);o||k.push("/");const v=(s,t)=>{const y=s.type;if(y===t)return!1;let a=!1;return typeof s.solution=="array"?a=s.solution.length>0:typeof s.solution=="object"?a=Object.keys(s.solution).length>0:a=!!s.solution,a&&!confirm("Are you sure you want to change the question type?")?!1:(t==="multiple-choice"?y==="multiple-answer"?s.solution=s.solution[0]:(s.options=[],s.solution=-1):t==="multiple-answer"?y==="multiple-choice"?s.solution=[s.solution]:(s.options=[],s.solution=[]):t==="ordering"?s.solution=[]:t==="fill-in-the-blank"?s.solution=[]:t==="matching"?s.solution={}:s.solution="",s.type=t,!0)},h=g([]),S=s=>{h.value.includes(s)?h.value=h.value.filter(t=>t!==s):h.value.push(s)};return(s,t)=>(c(),D(X,null,{default:U(()=>{var y;return[i(_e,{ref:"shareModal"},null,512),e("div",me,[e("div",ge,[l(o)?(c(),_("div",ye,[i(O,{modelValue:l(o).title,"onUpdate:modelValue":t[0]||(t[0]=a=>l(o).title=a),class:"h1"},{default:U(()=>[e("h1",null,b(l(o).title),1)]),_:1},8,["modelValue"]),i(O,{modelValue:l(o).description,"onUpdate:modelValue":t[1]||(t[1]=a=>l(o).description=a)},{default:U(()=>[e("p",be,b(l(o).description),1)]),_:1},8,["modelValue"]),e("div",ke,[we,i(d,{icon:"replay",label:"Reset",onClick:t[2]||(t[2]=a=>l(p).resetProgress(l(o)))}),e("div",Ce,[e("div",$e,[e("progress",{value:l(p).progress(l(o)),max:"100"},null,8,Se)]),e("span",Ve,b(l(p).progress(l(o)))+"%",1)])]),e("div",xe,[(y=l(o).remote)!=null&&y.length?(c(),D(d,{key:0,icon:"file_download",label:"Pull",onClick:t[3]||(t[3]=a=>l(p).pull({course:l(o)}))})):$("",!0),i(d,{icon:"file_upload",label:"Share",onClick:t[4]||(t[4]=a=>s.$refs.shareModal.open(l(o)))}),i(d,{icon:"school",label:"Start",type:"action-green",onClick:t[5]||(t[5]=a=>l(k).push(`/quiz/${l(o).id}`))}),i(d,{icon:"delete",label:"Delete",type:"action-red",onClick:t[6]||(t[6]=a=>l(p).removeCourse(l(o).id)&&l(k).push("/courses"))})])])):$("",!0),l(o)?(c(),_("div",Te,[(c(!0),_(x,null,K(l(o).questions,(a,P)=>(c(),_("div",Pe,[e("div",Ue,[e("div",Me,[i(d,{icon:"arrow_upward",onClick:m=>l(p).moveQuestionUp(l(o),a)},null,8,["onClick"]),e("span",Ne,b(P+1)+" / "+b(l(o).questions.length),1),i(d,{icon:"arrow_downward",onClick:m=>l(p).moveQuestionDown(l(o),a)},null,8,["onClick"])]),e("div",Oe,[i(W,{options:l(Z),modelValue:a.type,"onUpdate:modelValue":m=>a.type=m,onChange:m=>v(a,m),label:"type"},null,8,["options","modelValue","onUpdate:modelValue","onChange"]),i(d,{icon:"delete",type:"action-red",onClick:m=>l(o).questions.splice(l(o).questions.indexOf(a),1)},null,8,["onClick"])]),e("div",De,[e("span",{class:"muted material-symbols-rounded cursor-pointer",onClick:m=>S(a.id)},b(h.value.includes(a.id)?"expand_less":"expand_more"),9,Ae)])]),h.value.includes(a.id)?$("",!0):(c(),_("div",Ge,[i(H,{question:a,editable:""},null,8,["question"])]))]))),256)),e("div",Ie,[i(d,{icon:"add",label:"Add",type:"action-green",onClick:t[7]||(t[7]=a=>l(o).questions.push({id:Math.random().toString(36).substring(2,9),type:"text-answer",title:"",question:"",solution:""}))})])])):$("",!0)])])]}),_:1}))}}),Qe=E(Be,[["__scopeId","data-v-8b61dd85"]]);export{Qe as default};
