import{bB as S,r as g,bq as y}from"./index-b07a7f4c.js";const C=(c,s=15)=>{const n=JSON.parse(JSON.stringify(c));n.questions=n.questions.slice(0,s);for(const r of n.questions)r.answer&&console.warn("Question already has an answer",r),delete r.answer;return n},i="quizme.courses",q=S("course",()=>{const c=JSON.parse(localStorage.getItem(i)||"[]"),s=g(c);y(s,e=>{localStorage.setItem(i,JSON.stringify(e))},{deep:!0});const n=e=>{s.value.push(e)},r=e=>s.value.find(t=>t.id===e),l=e=>{const t=s.value.findIndex(o=>o.id===e);return s.value.splice(t,1),!0},d=(e,t=15)=>{const o=r(e);if(!o)throw new Error(`Course ${e} not found`);return C(o,t)},f=e=>{const t=document.createElement("a"),o=new Blob([JSON.stringify(e,null,4)],{type:"application/json"});t.href=URL.createObjectURL(o),t.download=`${e.title}.json`,t.click()},p=()=>new Promise((e,t)=>{const o=document.createElement("input");o.type="file",o.accept="application/json",o.onchange=()=>{if(!o.files){t(new Error("No file selected"));return}const m=o.files[0],a=new FileReader;a.onload=()=>{const w=a.result;try{const u=JSON.parse(w);e(u)}catch(u){t(u)}},a.readAsText(m)},o.click()});return{courses:s,addCourse:n,getCourse:r,removeCourse:l,getQuiz:d,downloadCourse:f,addFromUpload:async()=>{const e=await p();n(e)}}});export{q as u};
