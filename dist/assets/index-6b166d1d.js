import{_ as $}from"./Question.vue_vue_type_script_setup_true_lang-8515549f.js";import{I as d}from"./IconButton-320773b0.js";import{d as z,u as D,r as m,e as N,f as i,g as a,F as V,b as e,t as f,h as v,i as F,c as L,j as Q,o as n,p as j,a as A}from"./index-7b9869b5.js";import{u as O}from"./course-6adfd603.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const c=_=>(j("data-v-a33b64dc"),_=_(),A(),_),G={class:"quiz"},H={class:"header"},J={class:"flex gap-2"},K=["max","value"],P={class:"body"},U={key:1,class:"end"},X=c(()=>e("h1",null,"Well done!",-1)),Y={class:"review"},Z={class:"score"},ee=c(()=>e("span",null,"SCORE",-1)),se={class:"value"},te={class:"time"},oe=c(()=>e("span",null,"TIME",-1)),ne={class:"value"},le={class:"footer"},ae={key:0,class:"check"},ue={key:1,class:"check"},ie={key:2,class:"checking"},ce={key:0,class:"correct"},re=c(()=>e("div",{class:"continue"},[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"},"check")])],-1)),de=c(()=>e("div",{class:"text"},[e("h2",null,"Correct!")],-1)),ve={class:"continue"},_e={key:1,class:"wrong"},he=c(()=>e("div",{class:"continue"},[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"},"close")])],-1)),pe={class:"text"},me=c(()=>e("h2",null,"Correct solution:",-1)),fe={class:"continue"},ge=z({__name:"index",setup(_){const w=D(),C=O(),l=m({correct:[],wrong:[],startTime:new Date,endTime:null}),t=m(C.getQuiz(w.params.id)),h=N(),o=m(0),k=i(()=>{var s;return((s=t.value.questions[o.value])==null?void 0:s.answer)!=null}),x=i(()=>{var s;return((s=t.value.questions[o.value])==null?void 0:s.hint)!=null}),T=()=>{alert(t.value.questions[o.value].hint)},r=m(!1),b=i(()=>t.value.questions[o.value].answer===S.value),S=i(()=>t.value.questions[o.value].solution),E=i(()=>{const s=t.value.questions[o.value];if(s.type==="multiple-choice")return s.options[s.solution]}),g=()=>{r.value=!1,o.value++,I()},p=i(()=>o.value===t.value.questions.length),I=()=>{console.log("onEnd"),p.value&&(l.value.endTime=new Date,console.log(l.value))},B=()=>{if(o.value===0){h.push("/");return}confirm("Are you sure you want to quit?")&&h.push("/")},q=()=>{r.value=!0;const s=t.value.questions[o.value].id;if(b.value){l.value.correct.push(s);return}l.value.wrong.push(s),t.value.questions.filter(u=>u.id===s).length===1&&(t.value.questions.push(t.value.questions[o.value]),delete t.value.questions[t.value.questions.length-1].answer)},R=i(()=>{if(l.value.endTime==null)return 0;const s=l.value.endTime.getTime()-l.value.startTime.getTime(),u=Math.floor(s/1e3),y=Math.floor(u/60),M=(u-y*60).toString().padStart(2,"0");return`${y}:${M}`});return document.addEventListener("keydown",s=>{if(s.key==="Enter"){if(p.value){h.push("/");return}if(r.value){g();return}if(!k.value)return;q()}}),(s,u)=>(n(),a("div",G,[p.value?(n(),a("div",U,[X,e("div",Y,[e("div",Z,[ee,e("span",se,f(Math.round(l.value.correct.length/t.value.questions.length*100))+" % ",1)]),e("div",te,[oe,e("span",ne,f(R.value),1)])])])):(n(),a(V,{key:0},[e("div",H,[e("h1",null,f(t.value.title),1),e("div",J,[e("span",{onClick:B,class:"material-symbols-rounded muted cursor-pointer"},"close"),e("progress",{max:t.value.questions.length,value:o.value+(r.value?1:0)},null,8,K)])]),e("div",P,[v($,{question:t.value.questions[o.value],disabled:r.value},null,8,["question","disabled"])])],64)),e("div",le,[p.value?(n(),a("div",ae,[v(d,{class:"left",label:"Review Lesson",type:"minimal-grey"}),v(d,{class:"right",label:"Continue",type:"submit",onClick:u[0]||(u[0]=y=>F(h).push("/"))})])):r.value?(n(),a("div",ie,[b.value?(n(),a("div",ce,[re,de,e("div",ve,[v(d,{label:"Continue",type:"submit",onClick:g})])])):(n(),a("div",_e,[he,e("div",pe,[me,e("p",null,f(E.value),1)]),e("div",fe,[v(d,{label:"Continue",type:"action-red",onClick:g})])]))])):(n(),a("div",ue,[x.value?(n(),L(d,{key:0,class:"left",icon:"lightbulb",label:"Show Tip",type:"minimal-blue",onClick:T})):Q("",!0),v(d,{class:"right",label:"Check",type:"submit",disabled:!k.value,onClick:q},null,8,["disabled"])]))])]))}});const Ce=W(ge,[["__scopeId","data-v-a33b64dc"]]);export{Ce as default};
