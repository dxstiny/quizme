import{d as w,a as C,j as _,l as N,bP as I,b as S,w as $,k as A,q as B,o,e,f as n,t as h,a8 as q,F as P,r as V,n as l,I as c,g as m,h as j,x as G,p as L,i as R,_ as T}from"./index-bh0uagku.js";import{_ as E}from"./WithSidebar.vue_vue_type_style_index_0_lang-7updZBuT.js";const u=d=>(L("data-v-3c23d2bd"),d=d(),R(),d),F={class:"wrap"},H={key:0,class:"flex-col"},M={key:0,class:"text-muted italic text-sm"},D={key:1,class:"mt-4 w-max flex flex-col gap-4"},O={class:"items"},W={class:"card flex gap-2 items-center"},Y={class:"flex flex-col"},z={class:"text-muted"},J={class:"mt-4 text-muted text-sm uppercase italic"},K={class:"buttons flex gap-2"},Q={key:1,class:"error flex-col"},U=u(()=>e("h1",null,"Guess you'll have to create it yourself...",-1)),X=u(()=>e("p",null," No course was found at the link you provided. The course may have been deleted or the link may be incorrect. ",-1)),Z={class:"flex gap-2"},ee={key:2,class:"error flex-col"},te=u(()=>e("h1",null,"Not Allowed",-1)),se=u(()=>e("p",null,"You don't have permission to view this course.",-1)),oe={class:"card"},ne=u(()=>e("p",null,"Wait, this is my Gist!",-1)),ae=["value"],le=w({__name:"ImportLink",setup(d){const f=A(),i=B(),x=C(),k=_(""),r=_([]),p=_(null),v=_("");N(async()=>{const t=f.params.id,s=await I(t);if(s.error){p.value=s.error;return}r.value=[s.course],k.value=s.author??"(unknown)"});const y=async()=>{const t=r.value[0];t.remote??(t.remote=[]),t.remote.push({identifier:f.params.id}),await x.addCourse(t),i.push(`/courses/${r.value[0].id}`)},b=()=>{const t=Math.random().toString(36).substring(7);x.addCourse({title:"New Course",description:"",questions:[],id:t}),i.push(`/courses/${t}`)},g=()=>{G.setPat(v.value),window.location.reload()};return(t,s)=>(o(),S(E,null,{default:$(()=>[e("div",F,[p.value==null?(o(),n("div",H,[e("span",null,[e("strong",null,h(k.value),1),q(" wants to share: ")]),r.value.length==0?(o(),n("span",M,"Nothing")):(o(),n("div",D,[e("div",O,[(o(!0),n(P,null,V(r.value,a=>(o(),n("div",W,[e("div",Y,[e("h1",null,h(a.title),1),e("span",z,h(a.description),1),e("span",J,h(a.questions.length)+" questions ",1)])]))),256))]),e("div",K,[l(c,{type:"action-green",icon:"check",label:"Accept",onClick:y}),l(c,{type:"action-red",icon:"close",label:"Reject",onClick:s[0]||(s[0]=a=>m(i).push("/"))})])]))])):p.value=="not-found"?(o(),n("div",Q,[U,X,e("div",Z,[l(c,{type:"action-green",icon:"add",label:"Create New Course",onClick:b}),l(c,{icon:"home",label:"Home",onClick:s[1]||(s[1]=a=>m(i).push("/"))})])])):p.value=="not-allowed"?(o(),n("div",ee,[te,se,e("div",oe,[ne,e("input",{type:"text",value:v.value,placeholder:"Enter your GitHub PAT here"},null,8,ae),l(c,{type:"action-green",icon:"check",label:"Accept",onClick:g,disabled:!v.value.length},null,8,["disabled"])]),l(c,{type:"action-red",icon:"close",label:"Close",onClick:s[2]||(s[2]=a=>m(i).push("/"))})])):j("",!0)])]),_:1}))}}),re=T(le,[["__scopeId","data-v-3c23d2bd"]]);export{re as default};
