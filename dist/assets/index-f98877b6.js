import{_ as F}from"./Question.vue_vue_type_script_setup_true_lang-55bee49c.js";import{d as N,u as Q,h as V,i as w,j as L,c,e as r,F as O,b as s,t as b,k as h,l as A,I as p,a as W,f as G,o as u,p as H,g as J,_ as K}from"./index-23f5850a.js";import{u as P}from"./stats-611b8865.js";const d=m=>(H("data-v-df300669"),m=m(),J(),m),U={class:"quiz"},X={class:"header"},Y={class:"flex gap-2"},Z=["max","value"],ee={class:"body"},se={key:1,class:"end"},te=d(()=>s("h1",null,"Well done!",-1)),ne={class:"review"},oe={class:"score"},le=d(()=>s("span",null,"SCORE",-1)),ae={class:"value"},ue={class:"time"},ie=d(()=>s("span",null,"TIME",-1)),ce={class:"value"},re={class:"footer"},de={key:0,class:"check"},ve={key:1,class:"check"},_e={key:2,class:"checking"},he={key:0,class:"correct"},pe=d(()=>s("div",{class:"continue"},[s("div",{class:"icon"},[s("span",{class:"material-symbols-rounded"},"check")])],-1)),me=d(()=>s("div",{class:"text"},[s("h2",null,"Correct!")],-1)),fe={class:"continue"},ye={key:1,class:"wrong"},ke=d(()=>s("div",{class:"continue"},[s("div",{class:"icon"},[s("span",{class:"material-symbols-rounded"},"close")])],-1)),ge={class:"text"},we=d(()=>s("h2",null,"Correct solution:",-1)),be={class:"continue"},qe=N({__name:"index",setup(m){const S=Q(),I=V(),f=P(),i=w({correct:[],wrong:[],startTime:new Date,endTime:null}),o=w(I.getQuiz(S.params.id)),y=L(),l=w(0),n=c(()=>o.value.questions[l.value]),q=c(()=>{var t;const e=n.value;if(e.type=="matching"){const a=e.answer||{},_=e.solution||{};return Object.keys(_).every(x=>a[x]===_[x])}return((t=o.value.questions[l.value])==null?void 0:t.answer)!=null}),E=c(()=>{var e;return((e=o.value.questions[l.value])==null?void 0:e.hint)!=null}),R=()=>{alert(o.value.questions[l.value].hint)},v=w(!1),C=()=>{if(console.log("correct??"),n.value.type==="matching")return k(),!0;if(n.value.type=="multiple-answer"){const e=n.value.solution||[],t=n.value.answer||[];return e.every(a=>t.includes(a))}if(n.value.type=="ordering"){const e=n.value.solution||[],t=n.value.answer||[];return e.every((a,_)=>a===t[_])}return n.value.answer===j.value},B=c(()=>n.value.type==="matching"?"Continue":"Check"),j=c(()=>n.value.solution),M=c(()=>{const e=n.value;if(e.type==="multiple-choice")return e.options[e.solution];if(e.type==="multiple-answer")return e.solution.map(t=>e.options[t]).join(", ");if(e.type==="true-false")return e.solution?"True":"False";if(["text-answer","number-answer"].includes(e.type))return e.solution;if(e.type==="ordering")return e.solution.join(", ")}),k=()=>{v.value=!1,l.value++,$()},g=c(()=>l.value===o.value.questions.length),$=()=>{g.value&&(i.value.endTime=new Date,f.resetStreak(),f.addRun(i.value))},z=()=>{if(l.value===0){y.push("/");return}confirm("Are you sure you want to quit?")&&y.push("/")},T=()=>{v.value=!0;const e=n.value.id;if(C()){i.value.correct.push(e),f.addToStreak();return}i.value.wrong.push(e),f.resetStreak(),o.value.questions.filter(t=>t.id===e).length===1&&(o.value.questions.push(n.value),delete o.value.questions[o.value.questions.length-1].answer)},D=c(()=>{if(i.value.endTime==null)return 0;const e=i.value.endTime.getTime()-i.value.startTime.getTime(),t=Math.floor(e/1e3),a=Math.floor(t/60),_=(t-a*60).toString().padStart(2,"0");return`${a}:${_}`});return document.addEventListener("keydown",e=>{if(e.key==="Enter"){if(g.value){y.push("/");return}if(v.value){k();return}if(!q.value)return;T()}}),(e,t)=>(u(),r("div",U,[g.value?(u(),r("div",se,[te,s("div",ne,[s("div",oe,[le,s("span",ae,b(Math.round(i.value.correct.length/o.value.questions.length*100))+" % ",1)]),s("div",ue,[ie,s("span",ce,b(D.value),1)])])])):(u(),r(O,{key:0},[s("div",X,[s("h1",null,b(o.value.title),1),s("div",Y,[s("span",{onClick:z,class:"material-symbols-rounded muted cursor-pointer"},"close"),s("progress",{max:o.value.questions.length,value:l.value+(v.value?1:0)},null,8,Z)])]),s("div",ee,[h(F,{question:o.value.questions[l.value],disabled:v.value},null,8,["question","disabled"])])],64)),s("div",re,[g.value?(u(),r("div",de,[h(p,{class:"left",label:"Review Lesson",type:"minimal-grey"}),h(p,{class:"right",label:"Continue",type:"submit",onClick:t[0]||(t[0]=a=>A(y).push("/"))})])):v.value?(u(),r("div",_e,[C()?(u(),r("div",he,[pe,me,s("div",fe,[h(p,{label:"Continue",type:"submit",onClick:k})])])):(u(),r("div",ye,[ke,s("div",ge,[we,s("p",null,b(M.value),1)]),s("div",be,[h(p,{label:"Continue",type:"action-red",onClick:k})])]))])):(u(),r("div",ve,[E.value?(u(),W(p,{key:0,class:"left",icon:"lightbulb",label:"Show Tip",type:"minimal-blue",onClick:R})):G("",!0),h(p,{class:"right",label:B.value,type:"submit",disabled:!q.value,onClick:T},null,8,["label","disabled"])]))])]))}});const Se=K(qe,[["__scopeId","data-v-df300669"]]);export{Se as default};
