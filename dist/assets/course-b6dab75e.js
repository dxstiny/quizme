import{bB as g,r as q,l as S}from"./index-d68fe823.js";const v=(c,s=15)=>{const t=JSON.parse(JSON.stringify(c));t.questions=t.questions.slice(0,s);for(const r of t.questions)r.answer&&console.warn("Question already has an answer",r),delete r.answer;return t},l="quizme.courses",O=g("course",()=>{const c=JSON.parse(localStorage.getItem(l)||"[]"),s=q(c);S(s,e=>{localStorage.setItem(l,JSON.stringify(e))},{deep:!0});const t=e=>{s.value.push(e)},r=e=>s.value.find(o=>o.id===e),d=e=>{const o=s.value.findIndex(n=>n.id===e);return s.value.splice(o,1),!0},f=(e,o=15)=>{const n=r(e);if(!n)throw new Error(`Course ${e} not found`);return v(n,o)},p=e=>{const o=document.createElement("a"),n=new Blob([JSON.stringify(e,null,4)],{type:"application/json"});o.href=URL.createObjectURL(n),o.download=`${e.title}.json`,o.click()},m=()=>new Promise((e,o)=>{const n=document.createElement("input");n.type="file",n.accept="application/json",n.onchange=()=>{if(!n.files){o(new Error("No file selected"));return}const i=n.files[0],u=new FileReader;u.onload=()=>{const w=u.result;try{const a=JSON.parse(w);e(a)}catch(a){o(a)}},u.readAsText(i)},n.click()});return{courses:s,addCourse:t,getCourse:r,removeCourse:d,getQuiz:f,downloadCourse:p,addFromUpload:async()=>{const e=await m();t(e)},moveQuestionUp:(e,o)=>{const n=e.questions.findIndex(i=>i.id===o.id);n!==0&&(e.questions.splice(n,1),e.questions.splice(n-1,0,o))},moveQuestionDown:(e,o)=>{const n=e.questions.findIndex(i=>i.id===o.id);n!==e.questions.length-1&&(e.questions.splice(n,1),e.questions.splice(n+1,0,o))}}});export{O as u};
