import{d as defineComponent,r as ref,w as watch,f as computed,a as openBlock,c as createElementBlock,z as renderSlot,v as withDirectives,x as vModelText,A as withModifiers,B as withKeys,y as normalizeClass,C as nextTick,_ as _export_sfc,t as toDisplayString,k as createCommentVNode,E as createTextVNode,b as createBaseVNode,g as createBlock,m as createVNode,i as withCtx,F as Fragment,l as renderList,o as onMounted,j as unref,I as IconButton,G as resolveDynamicComponent}from"./index-BsjsBPlp.js";import{d as draggable}from"./FillInTheBlank.vue_vue_type_style_index_0_lang-D0amPu6h.js";import{E as ExpandedDropdown}from"./ExpandedDropdown-BdD3VhF6.js";const _hoisted_1$b=["placeholder"],_sfc_main$c=defineComponent({__name:"EditableText",props:{modelValue:{type:String,required:!0},locked:{type:Boolean,default:!1},noOutline:{type:Boolean,default:!1},placeholder:{type:String,default:"Click to edit"}},emits:["update:modelValue","change"],setup(t,{emit:e}){const o=t,r=ref(o.modelValue);watch(()=>o.modelValue,a=>r.value=a);const n=ref(!1),l=e,m=ref(null),d=()=>{o.locked||(n.value=!0,nextTick(()=>{m.value&&(u(),m.value.focus())}))},c=computed(()=>o.locked?!0:n.value?!1:r.value),i=a=>{r.value=a,l("change",a),l("update:modelValue",a)},u=()=>{m.value&&(m.value.style.height="auto",m.value.style.height=m.value.scrollHeight+"px")},s=a=>{a.shiftKey||(a.preventDefault(),n.value=!n.value)};return(a,p)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["editable-text",{outlined:!t.noOutline&&n.value}]),onDblclick:withModifiers(d,["stop"])},[c.value?renderSlot(a.$slots,"default",{key:0},void 0,!0):withDirectives((openBlock(),createElementBlock("textarea",{key:1,ref_key:"area",ref:m,"onUpdate:modelValue":p[0]||(p[0]=f=>r.value=f),onChange:p[1]||(p[1]=f=>i(f.target.value)),onInput:p[2]||(p[2]=f=>u()),onClick:p[3]||(p[3]=withModifiers(f=>n.value=!0,["stop"])),onKeydown:[withKeys(s,["enter"]),p[4]||(p[4]=withKeys(f=>n.value=!1,["esc"]))],onBlur:p[5]||(p[5]=f=>n.value=!1),placeholder:t.placeholder},null,40,_hoisted_1$b)),[[vModelText,r.value]])],34))}}),EditableText=_export_sfc(_sfc_main$c,[["__scopeId","data-v-824fa419"]]),_hoisted_1$a={class:"tag"},_hoisted_2$9={key:0,class:"material-symbols-rounded"},_sfc_main$b=defineComponent({__name:"Tag",props:{label:String,icon:String},setup(t){return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[t.icon?(openBlock(),createElementBlock("span",_hoisted_2$9,toDisplayString(t.icon),1)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(t.label),1)]))}}),Tag=_export_sfc(_sfc_main$b,[["__scopeId","data-v-5305512e"]]),_hoisted_1$9={class:"question multiple-choice"},_hoisted_2$8={class:"header"},_hoisted_3$8={class:"options"},_hoisted_4$7=["onClick","onKeypress","onKeydown"],_hoisted_5$5=["onClick"],_sfc_main$a=defineComponent({__name:"MultipleChoice",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},showCorrection:{type:Boolean,default:!1}},setup(t){const e=t,o=ref([]),r=()=>{if(e.editable){o.value=e.question.options;return}const i=e.question.options[e.question.solution];o.value=e.question.options.sort(()=>Math.random()-.5),e.question.solution=o.value.findIndex(u=>u===i),e.question.options=e.question.options};r(),watch(()=>e.question.options,r);const n=i=>{if(!e.disabled){if(e.editable){e.question.solution=i;return}e.question.answer=i}},l=i=>{if(e.editable&&e.question.solution===i||e.showCorrection&&e.question.solution===i&&e.question.answer===i)return!0},m=i=>{if(e.showCorrection&&e.question.solution!==i&&e.question.answer===i||e.showCorrection&&e.question.solution===i&&e.question.answer!==i)return!0},d=i=>{e.editable},c=i=>{if(!e.editable||i.shiftKey)return;i.preventDefault();const s=i.target.querySelector("div");if(s){const a=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(a);return}};return(i,u)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$8,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Multiple Choice",icon:"rule"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":u[0]||(u[0]=s=>t.question.title=s),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":u[1]||(u[1]=s=>t.question.question=s)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),createBaseVNode("div",_hoisted_3$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(s,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["option",{selected:!t.editable&&e.question.answer===a,correct:l(a),wrong:m(a)}]),tabindex:"0",onClick:p=>n(a),onKeypress:[withKeys(withModifiers(p=>n(a),["stop"]),["space"]),withKeys(withModifiers(c,["stop"]),["enter"])],onKeydown:withKeys(p=>d(),["delete"])},[createVNode(EditableText,{locked:!t.editable,"no-outline":"",modelValue:o.value[a],"onUpdate:modelValue":p=>o.value[a]=p},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(s),1)]),_:2},1032,["locked","modelValue","onUpdate:modelValue"]),t.editable?(openBlock(),createElementBlock("span",{key:0,class:"material-symbols-rounded delete",onClick:withModifiers(p=>e.question.options.splice(a,1),["stop"])}," delete ",8,_hoisted_5$5)):createCommentVNode("",!0)],42,_hoisted_4$7))),256)),t.editable?(openBlock(),createElementBlock("div",{key:0,class:"option add",tabindex:"0",onClick:u[2]||(u[2]=withModifiers(s=>e.question.options.push("Option"),["stop"])),onKeypress:u[3]||(u[3]=withKeys(s=>e.question.options.push("Option"),["enter"]))},u[4]||(u[4]=[createBaseVNode("span",{class:"material-symbols-rounded add"}," add ",-1),createTextVNode(" Add ")]),32)):createCommentVNode("",!0)])]))}}),MultipleChoice=_export_sfc(_sfc_main$a,[["__scopeId","data-v-1504bbaf"]]),_hoisted_1$8={class:"question multiple-choice"},_hoisted_2$7={class:"header"},_hoisted_3$7={class:"options"},_hoisted_4$6=["onClick","onKeypress"],_hoisted_5$4=["onClick"],_sfc_main$9=defineComponent({__name:"MultipleAnswers",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},showCorrection:{type:Boolean,default:!1}},setup(t){const e=t,o=ref([]),r=()=>{if(e.editable){o.value=e.question.options;return}const d=e.question.solution.map(c=>e.question.options[c]);o.value=e.question.options.sort(()=>Math.random()-.5),e.question.solution=d.map(c=>o.value.findIndex(i=>i===c)),e.question.options=e.question.options,e.question.answer=e.question.answer??[]};r(),watch(()=>e.question.options,r);const n=d=>{if(!e.disabled){if(e.editable){if(e.question.solution.includes(d)){e.question.solution.splice(e.question.solution.findIndex(c=>c===d),1);return}e.question.solution.push(d);return}if(e.question.answer||(e.question.answer=[]),e.question.answer.includes(d)){e.question.answer.splice(e.question.answer.findIndex(c=>c===d),1);return}e.question.answer.push(d)}},l=d=>{var c;return!!(e.editable&&e.question.solution.includes(d)||e.showCorrection&&e.question.solution.includes(d)&&((c=e.question.answer)!=null&&c.includes(d)))},m=d=>{var c,i;return e.showCorrection?!!(!e.question.solution.includes(d)&&((c=e.question.answer)!=null&&c.includes(d))||e.question.solution.includes(d)&&!((i=e.question.answer)!=null&&i.includes(d))):!1};return onMounted(()=>{e.question.answer=[]}),(d,c)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$7,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Multiple Answer",icon:"checklist_rtl"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":c[0]||(c[0]=i=>t.question.title=i),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":c[1]||(c[1]=i=>t.question.question=i)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),createBaseVNode("div",_hoisted_3$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(i,u)=>{var s,a;return openBlock(),createElementBlock("div",{class:normalizeClass(["option",{selected:!t.editable&&((a=(s=e.question)==null?void 0:s.answer)==null?void 0:a.includes(u)),correct:l(u),wrong:m(u)}]),tabindex:"0",onClick:p=>n(u),onKeypress:withKeys(withModifiers(p=>n(u),["stop"]),["space"])},[createVNode(EditableText,{locked:!t.editable,"no-outline":"",onKeypress:c[2]||(c[2]=withKeys(withModifiers(()=>{},["stop"]),["space"])),modelValue:o.value[u],"onUpdate:modelValue":p=>o.value[u]=p},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(i),1)]),_:2},1032,["locked","modelValue","onUpdate:modelValue"]),t.editable?(openBlock(),createElementBlock("span",{key:0,class:"material-symbols-rounded delete",onClick:withModifiers(p=>e.question.options.splice(u,1),["stop"])}," delete ",8,_hoisted_5$4)):createCommentVNode("",!0)],42,_hoisted_4$6)}),256)),t.editable?(openBlock(),createElementBlock("div",{key:0,class:"option add",tabindex:"0",onClick:c[3]||(c[3]=withModifiers(i=>e.question.options.push("Option"),["stop"])),onKeypress:c[4]||(c[4]=withKeys(i=>e.question.options.push("Option"),["enter"]))},c[5]||(c[5]=[createBaseVNode("span",{class:"material-symbols-rounded add"}," add ",-1),createTextVNode(" Add ")]),32)):createCommentVNode("",!0)])]))}}),MultipleAnswers=_export_sfc(_sfc_main$9,[["__scopeId","data-v-c41f9b1f"]]),_hoisted_1$7={class:"question multiple-choice"},_hoisted_2$6={class:"header"},_hoisted_3$6={class:"optionlist"},_hoisted_4$5={class:"options"},_hoisted_5$3=["onClick","onKeypress"],_hoisted_6$2=["onClick","onKeypress"],_sfc_main$8=defineComponent({__name:"Matching",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(t){const e=t,o=ref({left:[],right:[]}),r=ref({left:[],right:[]}),n=ref({left:[],right:[]}),l=()=>{const u=e.question.solution.map(a=>a==null?void 0:a[0]),s=e.question.solution.map(a=>a==null?void 0:a[1]);if(r.value.left=[],r.value.right=[],e.editable){o.value.left=u,o.value.right=s;return}o.value.left=u.sort(()=>Math.random()-.5),o.value.right=s.sort(()=>Math.random()-.5)};l(),watch(()=>e.question.solution,l,{deep:!0});const m=(u,s,a)=>{e.editable&&(e.question.solution[s][u]=a)},d=ref({left:null,right:null}),c=(u,s,a)=>{if(!e.editable){i(s,a);return}if(u.shiftKey)return;u.preventDefault();const f=u.target.querySelector("div");if(f){const v=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0});f.dispatchEvent(v);return}},i=(u,s)=>{if(e.disabled||e.editable||(e.question.answer||(e.question.answer=[]),r.value[s].includes(u)))return;if(d.value[s]===u){d.value[s]=null;return}if(d.value[s]=u,d.value.left===null||d.value.right===null)return;const a=o.value.left[d.value.left],p=o.value.right[d.value.right];if(e.question.answer.push([a,p]),e.question.solution.some(([f,v])=>f===a&&v===p))r.value.left.push(d.value.left),r.value.right.push(d.value.right);else{n.value.left.push(d.value.left),n.value.right.push(d.value.right);const f=d.value.left,v=d.value.right;setTimeout(()=>{n.value.left=n.value.left.filter(h=>h!==f),n.value.right=n.value.right.filter(h=>h!==v)},1e3)}d.value.left=null,d.value.right=null};return(u,s)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$6,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Matching",icon:"signpost"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":s[0]||(s[0]=a=>t.question.title=a),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":s[1]||(s[1]=a=>t.question.question=a)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),createBaseVNode("div",_hoisted_3$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value.left,(a,p)=>(openBlock(),createElementBlock("div",_hoisted_4$5,[(openBlock(),createElementBlock(Fragment,null,renderList(["left","right"],(f,v)=>createBaseVNode("div",{class:normalizeClass(["option",{selected:!t.editable&&d.value[f]===p,correct:!t.editable&&r.value[f].includes(p),wrong:!t.editable&&n.value[f].includes(p)}]),tabindex:"0",onClick:h=>i(p,f),onKeypress:[withKeys(withModifiers(h=>i(p,f),["stop"]),["space"]),withKeys(h=>c(h,p,f),["enter"])]},[createVNode(EditableText,{locked:!t.editable,"no-outline":"",onChange:h=>m(v,p,h),modelValue:o.value[f][p],"onUpdate:modelValue":h=>o.value[f][p]=h},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(o.value[f][p]),1)]),_:2},1032,["locked","onChange","modelValue","onUpdate:modelValue"])],42,_hoisted_5$3)),64)),t.editable?(openBlock(),createElementBlock("span",{key:0,class:"material-symbols-rounded delete",onClick:withModifiers(f=>e.question.solution.splice(p,1),["stop"]),onKeypress:withKeys(withModifiers(f=>e.question.solution.splice(p,1),["stop"]),["enter"])}," delete ",40,_hoisted_6$2)):createCommentVNode("",!0)]))),256)),t.editable?(openBlock(),createElementBlock("div",{key:0,class:"option add",tabindex:"0",onClick:s[2]||(s[2]=withModifiers(a=>e.question.solution.push(["",""]),["stop"])),onKeypress:s[3]||(s[3]=withKeys(a=>e.question.solution.push(["",""]),["enter"]))},s[4]||(s[4]=[createBaseVNode("span",{class:"material-symbols-rounded add"}," add ",-1),createTextVNode(" Add ")]),32)):createCommentVNode("",!0)])]))}}),Matching=_export_sfc(_sfc_main$8,[["__scopeId","data-v-4c6f745c"]]),_hoisted_1$6={class:"switch"},_sfc_main$7=defineComponent({__name:"Switch",props:{modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,r=e,n=()=>{r("update:modelValue",!o.modelValue)};return(l,m)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",{class:normalizeClass(["toggle-switch",{"toggle-switch--on":t.modelValue}]),onClick:n},null,2),createBaseVNode("label",null,toDisplayString(t.label),1)]))}}),levenshtein=(t,e)=>{if(t===e)return 0;var o=t.length,r=e.length;if(o===0||r===0)return o+r;var n=0,l,m,d,c,i,u,s,a,p=new Array(o);for(l=0;l<o;)p[l]=++l;for(;n+3<r;n+=4){var f=e.charCodeAt(n),v=e.charCodeAt(n+1),h=e.charCodeAt(n+2),q=e.charCodeAt(n+3);for(c=n,d=n+1,i=n+2,u=n+3,s=n+4,l=0;l<o;l++)a=t.charCodeAt(l),m=p[l],m<c||d<c?c=m>d?d+1:m+1:f!==a&&c++,c<d||i<d?d=c>i?i+1:c+1:v!==a&&d++,d<i||u<i?i=d>u?u+1:d+1:h!==a&&i++,i<u||s<u?u=i>s?s+1:i+1:q!==a&&u++,p[l]=s=u,u=i,i=d,d=c,c=m}for(;n<r;){var V=e.charCodeAt(n);for(c=n,i=++n,l=0;l<o;l++)m=p[l],m<c||i<c?i=m>i?i+1:m+1:V!==t.charCodeAt(l)?i=c+1:i=c,p[l]=i,c=m;s=i}return s},safeEval=t=>new Function("return "+t)(),_hoisted_1$5={class:"question"},_hoisted_2$5={class:"header"},_hoisted_3$5={key:0,class:"input"},_hoisted_4$4={class:"line"},_hoisted_5$2=["disabled"],_hoisted_6$1={class:"line notepad"},_hoisted_7$1={key:1},_hoisted_8$1={key:1,class:"settings"},_hoisted_9$1={class:"type-and-help"},_hoisted_10$1={class:"label"},_hoisted_11$1={key:0},_hoisted_12$1={class:"settings"},_hoisted_13={class:"pair"},_hoisted_14={class:"pair"},_hoisted_15={class:"pair"},_hoisted_16={class:"pair"},_sfc_main$6=defineComponent({__name:"NumberInput",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(__props){ref();const props=__props,value=ref(props.editable?props.question.solution:null),cachedQuestionId=ref(props.question.id);watch(value,()=>{if(value.value!=null){if(props.editable){props.question.solution=value.value;return}props.question.answer=value.value}}),watch(()=>props.question,()=>{if(cachedQuestionId.value!=props.question.id){if(cachedQuestionId.value=props.question.id,props.editable){value.value=props.question.solution;return}value.value=0}},{deep:!0});const typeOptions=[{label:"Exact",value:"exact"},{label:"Range",value:"range"}],type=ref("");watch(type,()=>{type.value==="exact"?(props.question.solution=props.question.solution||0,props.question.delta=props.question.delta||0,delete props.question.min,delete props.question.max):(props.question.solution=0,delete props.question.delta,props.question.min=props.question.min||0,props.question.max=props.question.max||0)}),onMounted(()=>{if(props.editable){if(props.question.allowNotes==null&&(props.question.allowNotes=!0),props.question.min!=null||props.question.max!=null){type.value="range";return}type.value="exact"}});const notes=ref(""),calculate=()=>{var t;if(!props.question.allowNotes||!props.question.allowCalculator)return;const latestLine=(t=notes.value.split(`
`).at(-1))==null?void 0:t.trim();if(latestLine!=null&&latestLine.endsWith("=")){const result=eval(latestLine.slice(0,-1));typeof result=="number"&&(value.value=result,notes.value+=result)}},autoResize=t=>{if(!t)return;const e=t;e.style.height="auto",e.style.height=e.scrollHeight+"px"};return(t,e)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[__props.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Number Input",icon:"calculate"})),createVNode(EditableText,{locked:!__props.editable,modelValue:__props.question.title,"onUpdate:modelValue":e[0]||(e[0]=o=>__props.question.title=o),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(__props.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!__props.editable,modelValue:__props.question.question,"onUpdate:modelValue":e[1]||(e[1]=o=>__props.question.question=o)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(__props.question.question),1)]),_:1},8,["locked","modelValue"])]),__props.editable?(openBlock(),createElementBlock("div",_hoisted_8$1,[createBaseVNode("div",_hoisted_9$1,[createVNode(ExpandedDropdown,{options:typeOptions,modelValue:type.value,"onUpdate:modelValue":e[5]||(e[5]=o=>type.value=o)},{label:withCtx(({option:o})=>[createBaseVNode("div",_hoisted_10$1,[createBaseVNode("h3",null,toDisplayString(o.label),1),o.description?(openBlock(),createElementBlock("p",_hoisted_11$1,toDisplayString(o.description),1)):createCommentVNode("",!0)])]),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_12$1,[createVNode(_sfc_main$7,{label:"allow calculator",modelValue:__props.question.allowCalculator,"onUpdate:modelValue":e[6]||(e[6]=o=>__props.question.allowCalculator=o)},null,8,["modelValue"]),createVNode(_sfc_main$7,{label:"allow notes",modelValue:__props.question.allowNotes,"onUpdate:modelValue":e[7]||(e[7]=o=>__props.question.allowNotes=o)},null,8,["modelValue"])])]),type.value=="exact"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_13,[e[15]||(e[15]=createBaseVNode("label",null,"Value",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>__props.question.solution=o),type:"number"},null,512),[[vModelText,__props.question.solution]])]),createBaseVNode("div",_hoisted_14,[e[16]||(e[16]=createBaseVNode("label",null,"Tolerance (delta)",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>__props.question.delta=o),type:"number"},null,512),[[vModelText,__props.question.delta]])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_15,[e[17]||(e[17]=createBaseVNode("label",null,"Minimum",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>__props.question.min=o),type:"number"},null,512),[[vModelText,__props.question.min]])]),createBaseVNode("div",_hoisted_16,[e[18]||(e[18]=createBaseVNode("label",null,"Maximum",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>__props.question.max=o),type:"number"},null,512),[[vModelText,__props.question.max]])])],64))])):(openBlock(),createElementBlock("div",_hoisted_3$5,[createBaseVNode("div",_hoisted_4$4,[e[12]||(e[12]=createBaseVNode("span",{class:"material-symbols-rounded"}," calculate ",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>value.value=o),type:"number",disabled:__props.disabled,placeholder:"Enter your answer here"},null,8,_hoisted_5$2),[[vModelText,value.value]])]),__props.question.allowNotes||__props.question.allowCalculator?(openBlock(),createElementBlock(Fragment,{key:0},[e[14]||(e[14]=createBaseVNode("hr",null,null,-1)),createBaseVNode("div",_hoisted_6$1,[__props.question.allowNotes?withDirectives((openBlock(),createElementBlock("textarea",{key:0,class:"notes",placeholder:"Notes",onKeypress:withKeys(calculate,["enter"]),onInput:e[3]||(e[3]=o=>autoResize(o.target)),"onUpdate:modelValue":e[4]||(e[4]=o=>notes.value=o)},null,544)),[[vModelText,notes.value]]):createCommentVNode("",!0),__props.question.allowCalculator?(openBlock(),createElementBlock("span",_hoisted_7$1,e[13]||(e[13]=[createBaseVNode("span",{class:"material-symbols-rounded"}," info ",-1),createTextVNode(" Calculator enabled. Terminate your calculation with an = and press enter. ")]))):createCommentVNode("",!0)])],64)):createCommentVNode("",!0)]))]))}}),NumberInput=_export_sfc(_sfc_main$6,[["__scopeId","data-v-12e793f3"]]),checkTextAnswer=t=>{let e=t.answer,o=t.solution,r=t.solutionAll,n=t.solutionAny;if(e==null)return!1;if(t.ignoreCase&&(e=e.toLowerCase(),o=o.toLowerCase(),r=r==null?void 0:r.map(l=>l.toLowerCase()),n=n==null?void 0:n.map(l=>l.toLowerCase())),t.ignoreWhitespace&&(e=e.replace(/\s/g,""),o=o.replace(/\s/g,""),r=r==null?void 0:r.map(l=>l.replace(/\s/g,"")),n=n==null?void 0:n.map(l=>l.replace(/\s/g,""))),t.ignorePunctuation){const l=/[.,\/#!$%\^&\*;:{}=\-_`~()]/g;e=e.replace(l,""),o=o.replace(l,""),r=r==null?void 0:r.map(m=>m.replace(l,"")),n=n==null?void 0:n.map(m=>m.replace(l,""))}if(t.solutionRegex){let l=safeEval(t.solutionRegex);return l instanceof RegExp||(l=new RegExp(t.solutionRegex)),l.test(e)}return r!=null&&r.length?r.every(l=>e==null?void 0:e.includes(l)):n!=null&&n.length?n.some(l=>e==null?void 0:e.includes(l)):t.levenshtein?levenshtein(e,o)<=t.levenshtein:e==o},checkNumber=t=>{const e=t.answer;return e==null||t.min!=null&&e<t.min||t.max!=null&&e>t.max?!1:t.min!=null||t.max!=null?!0:t.delta?Math.abs(e-t.solution)<=t.delta:e==t.solution},_hoisted_1$4={class:"question multiple-choice"},_hoisted_2$4={class:"header"},_hoisted_3$4={key:0,class:"input"},_hoisted_4$3=["disabled"],_hoisted_5$1={class:"settings"},_hoisted_6={class:"basic"},_hoisted_7={class:"label"},_hoisted_8={key:0},_hoisted_9=["disabled"],_hoisted_10={class:"advanced"},_hoisted_11={class:"levenshtein"},_hoisted_12={class:"tryout"},_sfc_main$5=defineComponent({__name:"TextInput",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(t){const e=t,o=ref("exact"),r=ref(""),n=ref("");onMounted(()=>{var u,s;l.value="",e.editable&&(l.value=e.question.solution,e.question.ignoreCase==null&&(e.question.ignoreCase=!0),e.question.ignoreWhitespace==null&&(e.question.ignoreWhitespace=!1),e.question.ignorePunctuation==null&&(e.question.ignorePunctuation=!1),e.question.levenshtein==null&&(e.question.levenshtein=0),e.question.solution&&(o.value="exact",n.value=e.question.solution),e.question.solutionRegex&&(o.value="regex",n.value=e.question.solutionRegex),(u=e.question.solutionAll)!=null&&u.length&&(o.value="all",n.value=e.question.solutionAll.join(",")),(s=e.question.solutionAny)!=null&&s.length&&(o.value="any",n.value=e.question.solutionAny.join(",")))});const l=ref(e.editable?e.question.solution:""),m=ref(e.question.id);watch(l,()=>{if(e.editable){e.question.solution=l.value;return}e.question.answer=l.value}),watch(()=>e.question,()=>{if(m.value!=e.question.id){if(m.value=e.question.id,e.editable){l.value=e.question.solution;return}l.value=""}},{deep:!0});const d=[{value:"exact",label:"Exact Match"},{value:"regex",label:"Regular Expression"},{value:"all",label:"All",description:"comma separated"},{value:"any",label:"Any",description:"comma separated"}],c=()=>{if(e.editable){if(o.value==="exact"){e.question.solution=n.value,e.question.solutionRegex="",e.question.solutionAll=[],e.question.solutionAny=[];return}if(o.value==="regex"){e.question.solution="",e.question.solutionRegex=n.value,e.question.solutionAll=[],e.question.solutionAny=[];return}if(o.value==="all"){e.question.solution="",e.question.solutionRegex="",e.question.solutionAll=n.value.split(","),e.question.solutionAny=[];return}if(o.value==="any"){e.question.solution="",e.question.solutionRegex="",e.question.solutionAll=[],e.question.solutionAny=n.value.split(",");return}}};watch(o,c);const i=computed(()=>checkTextAnswer({...e.question,answer:r.value}));return(u,s)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Text Input",icon:"edit_note"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":s[0]||(s[0]=a=>t.question.title=a),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":s[1]||(s[1]=a=>t.question.question=a)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),t.editable?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6,[createVNode(ExpandedDropdown,{options:d,modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=a=>o.value=a)},{label:withCtx(({option:a})=>[createBaseVNode("div",_hoisted_7,[createBaseVNode("h3",null,toDisplayString(a.label),1),a.description?(openBlock(),createElementBlock("p",_hoisted_8,toDisplayString(a.description),1)):createCommentVNode("",!0)])]),_:1},8,["modelValue"]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>n.value=a),onChange:c,type:"text",disabled:t.disabled},null,40,_hoisted_9),[[vModelText,n.value]])]),createBaseVNode("div",_hoisted_10,[createVNode(_sfc_main$7,{label:"ignore case",modelValue:t.question.ignoreCase,"onUpdate:modelValue":s[5]||(s[5]=a=>t.question.ignoreCase=a)},null,8,["modelValue"]),createVNode(_sfc_main$7,{label:"ignore punctuation",modelValue:t.question.ignorePunctuation,"onUpdate:modelValue":s[6]||(s[6]=a=>t.question.ignorePunctuation=a)},null,8,["modelValue"]),createVNode(_sfc_main$7,{label:"ignore whitespace",modelValue:t.question.ignoreWhitespace,"onUpdate:modelValue":s[7]||(s[7]=a=>t.question.ignoreWhitespace=a)},null,8,["modelValue"]),createBaseVNode("div",_hoisted_11,[s[11]||(s[11]=createBaseVNode("label",null," Levenshtein Distance (typo tolerance) ",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>t.question.levenshtein=a),type:"number"},null,512),[[vModelText,t.question.levenshtein]])])])]),s[13]||(s[13]=createBaseVNode("hr",null,null,-1)),createBaseVNode("div",_hoisted_12,[s[12]||(s[12]=createBaseVNode("label",null,"Tryout",-1)),withDirectives(createBaseVNode("input",{class:normalizeClass({correct:i.value,incorrect:!i.value}),"onUpdate:modelValue":s[9]||(s[9]=a=>r.value=a),type:"text"},null,2),[[vModelText,r.value]])])],64)):(openBlock(),createElementBlock("div",_hoisted_3$4,[s[10]||(s[10]=createBaseVNode("span",{class:"material-symbols-rounded"}," edit_note ",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>l.value=a),type:"text",disabled:t.disabled},null,8,_hoisted_4$3),[[vModelText,l.value]])]))]))}}),TextInput=_export_sfc(_sfc_main$5,[["__scopeId","data-v-ce12444c"]]),_hoisted_1$3={class:"question multiple-choice"},_hoisted_2$3={class:"header"},_hoisted_3$3={class:"options"},_sfc_main$4=defineComponent({__name:"TrueFalse",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(t){const e=t,o=r=>{if(e.editable){e.question.solution=r;return}e.question.answer=r};return onMounted(()=>{e.question.answer=void 0}),(r,n)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"True or False",icon:"check"})),createVNode(EditableText,{modelValue:t.question.title,"onUpdate:modelValue":n[0]||(n[0]=l=>t.question.title=l),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":n[1]||(n[1]=l=>t.question.question=l)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",{class:normalizeClass(["option",{selected:!t.editable&&t.question.answer===!0,correct:t.editable&&t.question.solution===!0}]),onClick:n[2]||(n[2]=l=>o(!0))},n[4]||(n[4]=[createBaseVNode("span",{class:"material-symbols-rounded"},"check",-1),createTextVNode(" True ")]),2),createBaseVNode("div",{class:normalizeClass(["option",{selected:!t.editable&&t.question.answer===!1,correct:t.editable&&t.question.solution===!1}]),onClick:n[3]||(n[3]=l=>o(!1))},n[5]||(n[5]=[createBaseVNode("span",{class:"material-symbols-rounded"},"close",-1),createTextVNode(" False ")]),2)])]))}}),TrueFalse=_export_sfc(_sfc_main$4,[["__scopeId","data-v-63d0d5e4"]]),_hoisted_1$2={class:"question multiple-choice"},_hoisted_2$2={class:"header"},_hoisted_3$2={class:"options"},_hoisted_4$2=["onClick","onKeypress"],_sfc_main$3=defineComponent({__name:"Ordering",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},showCorrection:{type:Boolean,default:!1}},setup(t){const e=t,o=ref(e.editable?e.question.solution:[]),r=()=>{if(e.editable)return;const n=JSON.parse(JSON.stringify(e.question.solution));e.question.answer=n.sort(()=>Math.random()-.5),o.value=e.question.answer};return watch(o,()=>{if(e.editable){e.question.solution=o.value;return}e.question.answer=o.value},{deep:!0}),watch(()=>e.question.id,r),onMounted(r),(n,l)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Ordering",icon:"sort"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":l[0]||(l[0]=m=>t.question.title=m),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":l[1]||(l[1]=m=>t.question.question=m)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),createBaseVNode("div",_hoisted_3$2,[createVNode(unref(draggable),{modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=m=>o.value=m),"item-key":"id",tag:"div",class:"options"},{item:withCtx(({element:m,index:d})=>[createBaseVNode("div",{class:normalizeClass(["option",{wrong:t.showCorrection&&t.question.solution[d]!==m}])},[createVNode(EditableText,{locked:!t.editable,"no-outline":"",modelValue:o.value[d],"onUpdate:modelValue":c=>o.value[d]=c},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(m),1)]),_:2},1032,["locked","modelValue","onUpdate:modelValue"]),t.editable?(openBlock(),createElementBlock("span",{key:0,class:"material-symbols-rounded delete",tabindex:"0",onClick:withModifiers(c=>e.question.solution.splice(d,1),["stop"]),onKeypress:withKeys(withModifiers(c=>e.question.solution.splice(d,1),["stop"]),["enter"])}," delete ",40,_hoisted_4$2)):createCommentVNode("",!0)],2)]),_:1},8,["modelValue"]),t.editable?(openBlock(),createElementBlock("div",{key:0,class:"option add",tabindex:"0",onClick:l[3]||(l[3]=withModifiers(m=>e.question.solution.push("Item"),["stop"])),onKeypress:l[4]||(l[4]=withKeys(withModifiers(m=>e.question.solution.push("Item"),["stop"]),["enter"]))},l[5]||(l[5]=[createBaseVNode("span",{class:"material-symbols-rounded add"}," add ",-1),createTextVNode(" Add ")]),32)):createCommentVNode("",!0)])]))}}),Ordering=_export_sfc(_sfc_main$3,[["__scopeId","data-v-36f16552"]]),_hoisted_1$1={class:"question multiple-choice"},_hoisted_2$1={class:"header"},_hoisted_3$1={class:"back"},_hoisted_4$1={class:"placeholder"},_sfc_main$2=defineComponent({__name:"Flashcard",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(t){const e=t,o=ref(!1);watch(()=>e.question.id,()=>{o.value=!1});const r=computed(()=>e.question.solution.replace(/\w/g,"c"));return(n,l)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Flashcard",icon:"bolt"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":l[0]||(l[0]=m=>t.question.title=m),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":l[1]||(l[1]=m=>t.question.question=m)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),t.editable?(openBlock(),createBlock(EditableText,{key:0,class:"back",locked:!1,modelValue:t.question.solution,"onUpdate:modelValue":l[2]||(l[2]=m=>t.question.solution=m),onClick:l[3]||(l[3]=withModifiers(()=>{},["stop"])),placeholder:"Click to edit the solution"},{default:withCtx(()=>[createBaseVNode("h3",null,toDisplayString(t.question.solution),1)]),_:1},8,["modelValue"])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["card",{revealed:o.value}]),onClick:l[4]||(l[4]=m=>o.value=!o.value)},[createBaseVNode("h3",_hoisted_3$1,toDisplayString(t.question.solution),1),l[5]||(l[5]=createBaseVNode("div",{class:"front"},[createBaseVNode("p",{class:"muted"},"Click to reveal")],-1)),createBaseVNode("h3",_hoisted_4$1,toDisplayString(r.value),1)],2))]))}}),Flashcard=_export_sfc(_sfc_main$2,[["__scopeId","data-v-59fc9250"]]),_hoisted_1={class:"question fill-in-the-blank"},_hoisted_2={class:"header"},_hoisted_3={key:0,class:"input editor"},_hoisted_4={key:1},_hoisted_5={class:"input"},_sfc_main$1=defineComponent({__name:"FillInTheBlank",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(t){const e=t,o=ref(),r=ref(),n=ref([]),l=()=>{if(!r.value)return[];const i=r.value.querySelectorAll(".gap");return Array.from(i).map(u=>u.value)},m=i=>{if(!r.value||!i)return;const u=/-\[(.*)\]-/g,s=i.matchAll(u),a=Array.from(s,p=>{const f=p.index||0,v=p[0].length;return{index:f,length:v,value:p[0],gap:p[1]}});window.onGapInput=p=>{const f=p.target,v=parseInt(f.dataset.index||"0");n.value[v]=f.value,e.question.answer=n.value};for(let p=a.length-1;p>=0;p--){const f=a[p],v=document.createElement("input");v.classList.add("gap"),v.value=e.editable?f.gap:"",v.size=(f.length-4)*2,v.dataset.index=`${p}`,v.disabled=e.editable,i=i.replace(f.value,v.outerHTML.replace("<input",`<input oninput='onGapInput(event)' value='${v.value}'`))}r.value.innerHTML=i,n.value=l()};watch(()=>e.disabled,()=>{var u;const i=(u=r.value)==null?void 0:u.querySelectorAll("input");i&&i.forEach(s=>{s.disabled=e.disabled})}),onMounted(()=>{e.editable&&(o.value.innerHTML=e.question.text),m(e.question.text)});const d=()=>{o.value&&(m(o.value.innerHTML),e.question.text=o.value.innerHTML,e.question.solution=n.value)},c=()=>{o.value.innerHTML+="-[gap]-",d()};return(i,u)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[t.editable?createCommentVNode("",!0):(openBlock(),createBlock(Tag,{key:0,label:"Fill in the Blank",icon:"edit"})),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.title,"onUpdate:modelValue":u[0]||(u[0]=s=>t.question.title=s),class:"h1"},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(t.question.title),1)]),_:1},8,["locked","modelValue"]),createVNode(EditableText,{locked:!t.editable,modelValue:t.question.question,"onUpdate:modelValue":u[1]||(u[1]=s=>t.question.question=s)},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.question.question),1)]),_:1},8,["locked","modelValue"])]),t.editable?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("div",{class:"textarea",contenteditable:!0,ref_key:"editor",ref:o,onFocusout:d},null,544),createVNode(IconButton,{label:"Add gap",icon:"add",onClick:c})])):createCommentVNode("",!0),t.editable?(openBlock(),createElementBlock("h4",_hoisted_4,"Preview")):createCommentVNode("",!0),createBaseVNode("div",_hoisted_5,[createBaseVNode("div",{class:"textarea",ref_key:"quiz",ref:r},null,512)])]))}}),_sfc_main=defineComponent({__name:"index",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1},showCorrection:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},setup(t){const e={"multiple-choice":MultipleChoice,"multiple-answer":MultipleAnswers,matching:Matching,"number-answer":NumberInput,"text-answer":TextInput,"true-false":TrueFalse,ordering:Ordering,flashcard:Flashcard,"fill-in-the-blank":_sfc_main$1};return(o,r)=>(openBlock(),createBlock(resolveDynamicComponent(e[t.question.type]),{question:t.question,disabled:t.disabled,editable:t.editable,showCorrection:t.showCorrection},null,8,["question","disabled","editable","showCorrection"]))}});export{EditableText as E,_sfc_main as _,checkNumber as a,_sfc_main$7 as b,checkTextAnswer as c};
