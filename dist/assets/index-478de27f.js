import{d as k,r as f,e as N,f as a,b as e,t as d,g as C,F as B,h as Q,o as l,n as E,c as M,u as V,i as F,j as v,k as m,l as A,p as W,a as G}from"./index-f5229a8d.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{u as H}from"./course-eefb0d4f.js";const J={class:"question multiple-choice"},K={class:"header"},P={key:0},U={class:"options"},X=["onClick"],Y=k({__name:"MultipleChoice",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},setup(s){const i=s,r=f([]),u=()=>{const c=i.question.options[i.question.solution];r.value=i.question.options.sort(()=>Math.random()-.5),i.question.solution=r.value.findIndex(n=>n===c),i.question.options=i.question.options};u(),N(()=>i.question.options,u);const t=c=>{i.disabled||(i.question.answer=c)};return(c,n)=>(l(),a("div",J,[e("div",K,[s.question.title?(l(),a("h1",P,d(s.question.title),1)):C("",!0),e("p",null,d(s.question.question),1)]),e("div",U,[(l(!0),a(B,null,Q(r.value,(q,y)=>(l(),a("div",{class:E(["option",{selected:i.question.answer===y}]),onClick:$=>t(y)},d(q),11,X))),256))])]))}});const Z=T(Y,[["__scopeId","data-v-4fceb85c"]]),ee=k({__name:"Question",props:{question:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},setup(s){return(i,r)=>s.question.type==="multiple-choice"?(l(),M(Z,{key:0,question:s.question,disabled:s.disabled},null,8,["question","disabled"])):C("",!0)}}),se=["disabled"],te={key:0,class:"material-symbols-rounded"},oe={class:"label"},ne=k({__name:"IconButton",props:{icon:{type:String,required:!1},label:{type:String,required:!0},type:{type:String,default:"minimal-blue"},disabled:{type:Boolean,default:!1}},setup(s){return(i,r)=>(l(),a("button",{class:E(["icon-button",s.type+(s.disabled?" disabled":"")]),disabled:s.disabled},[s.icon?(l(),a("span",te,d(s.icon),1)):C("",!0),e("span",oe,d(s.label),1)],10,se))}});const b=T(ne,[["__scopeId","data-v-3c3b91a6"]]),h=s=>(W("data-v-a33b64dc"),s=s(),G(),s),le={class:"quiz"},ie={class:"header"},ae={class:"flex gap-2"},ue=["max","value"],ce={class:"body"},de={key:1,class:"end"},re=h(()=>e("h1",null,"Well done!",-1)),_e={class:"review"},ve={class:"score"},he=h(()=>e("span",null,"SCORE",-1)),pe={class:"value"},me={class:"time"},be=h(()=>e("span",null,"TIME",-1)),fe={class:"value"},qe={class:"footer"},ye={key:0,class:"check"},ge={key:1,class:"check"},ke={key:2,class:"checking"},Ce={key:0,class:"correct"},we=h(()=>e("div",{class:"continue"},[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"},"check")])],-1)),xe=h(()=>e("div",{class:"text"},[e("h2",null,"Correct!")],-1)),Te={class:"continue"},$e={key:1,class:"wrong"},Ie=h(()=>e("div",{class:"continue"},[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"},"close")])],-1)),Se={class:"text"},Be=h(()=>e("h2",null,"Correct solution:",-1)),Ee={class:"continue"},Me=k({__name:"index",setup(s){const i=V(),r=H(),u=f({correct:[],wrong:[],startTime:new Date,endTime:null}),t=f(r.getQuiz(i.params.id)),c=F(),n=f(0),q=v(()=>{var o;return((o=t.value.questions[n.value])==null?void 0:o.answer)!=null}),y=v(()=>{var o;return((o=t.value.questions[n.value])==null?void 0:o.hint)!=null}),$=()=>{alert(t.value.questions[n.value].hint)},p=f(!1),I=v(()=>t.value.questions[n.value].answer===R.value),R=v(()=>t.value.questions[n.value].solution),z=v(()=>{const o=t.value.questions[n.value];if(o.type==="multiple-choice")return o.options[o.solution]}),w=()=>{p.value=!1,n.value++,O()},g=v(()=>n.value===t.value.questions.length),O=()=>{console.log("onEnd"),g.value&&(u.value.endTime=new Date,console.log(u.value))},j=()=>{if(n.value===0){c.push("/");return}confirm("Are you sure you want to quit?")&&c.push("/")},S=()=>{p.value=!0;const o=t.value.questions[n.value].id;if(I.value){u.value.correct.push(o);return}u.value.wrong.push(o),t.value.questions.filter(_=>_.id===o).length===1&&(t.value.questions.push(t.value.questions[n.value]),delete t.value.questions[t.value.questions.length-1].answer)},D=v(()=>{if(u.value.endTime==null)return 0;const o=u.value.endTime.getTime()-u.value.startTime.getTime(),_=Math.floor(o/1e3),x=Math.floor(_/60),L=(_-x*60).toString().padStart(2,"0");return`${x}:${L}`});return document.addEventListener("keydown",o=>{if(o.key==="Enter"){if(g.value){c.push("/");return}if(p.value){w();return}if(!q.value)return;S()}}),(o,_)=>(l(),a("div",le,[g.value?(l(),a("div",de,[re,e("div",_e,[e("div",ve,[he,e("span",pe,d(Math.round(u.value.correct.length/t.value.questions.length*100))+" % ",1)]),e("div",me,[be,e("span",fe,d(D.value),1)])])])):(l(),a(B,{key:0},[e("div",ie,[e("h1",null,d(t.value.title),1),e("div",ae,[e("span",{onClick:j,class:"material-symbols-rounded muted cursor-pointer"},"close"),e("progress",{max:t.value.questions.length,value:n.value+(p.value?1:0)},null,8,ue)])]),e("div",ce,[m(ee,{question:t.value.questions[n.value],disabled:p.value},null,8,["question","disabled"])])],64)),e("div",qe,[g.value?(l(),a("div",ye,[m(b,{class:"left",label:"Review Lesson",type:"minimal-grey"}),m(b,{class:"right",label:"Continue",type:"submit",onClick:_[0]||(_[0]=x=>A(c).push("/"))})])):p.value?(l(),a("div",ke,[I.value?(l(),a("div",Ce,[we,xe,e("div",Te,[m(b,{label:"Continue",type:"submit",onClick:w})])])):(l(),a("div",$e,[Ie,e("div",Se,[Be,e("p",null,d(z.value),1)]),e("div",Ee,[m(b,{label:"Continue",type:"action-red",onClick:w})])]))])):(l(),a("div",ge,[y.value?(l(),M(b,{key:0,class:"left",icon:"lightbulb",label:"Show Tip",type:"minimal-blue",onClick:$})):C("",!0),m(b,{class:"right",label:"Check",type:"submit",disabled:!q.value,onClick:S},null,8,["disabled"])]))])]))}});const je=T(Me,[["__scopeId","data-v-a33b64dc"]]);export{je as default};
