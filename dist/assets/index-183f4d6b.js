import{_ as $}from"./Question.vue_vue_type_script_setup_true_lang-20c45e48.js";import{d as z,u as D,h as F,i as w,j as N,c as r,e as c,F as Q,b as s,t as b,k as _,l as V,I as h,a as L,f as A,o as u,p as W,g as G,_ as H}from"./index-167b7d9a.js";import{u as J}from"./stats-8ca4c785.js";const d=m=>(W("data-v-793338fa"),m=m(),G(),m),K={class:"quiz"},P={class:"header"},U={class:"flex gap-2"},X=["max","value"],Y={class:"body"},Z={key:1,class:"end"},ee=d(()=>s("h1",null,"Well done!",-1)),se={class:"review"},te={class:"score"},ne=d(()=>s("span",null,"SCORE",-1)),oe={class:"value"},le={class:"time"},ae=d(()=>s("span",null,"TIME",-1)),ue={class:"value"},ie={class:"footer"},ce={key:0,class:"check"},re={key:1,class:"check"},de={key:2,class:"checking"},ve={key:0,class:"correct"},_e=d(()=>s("div",{class:"continue"},[s("div",{class:"icon"},[s("span",{class:"material-symbols-rounded"},"check")])],-1)),he=d(()=>s("div",{class:"text"},[s("h2",null,"Correct!")],-1)),pe={class:"continue"},me={key:1,class:"wrong"},fe=d(()=>s("div",{class:"continue"},[s("div",{class:"icon"},[s("span",{class:"material-symbols-rounded"},"close")])],-1)),ye={class:"text"},ke=d(()=>s("h2",null,"Correct solution:",-1)),ge={class:"continue"},we=z({__name:"index",setup(m){const x=D(),S=F(),f=J(),i=w({correct:[],wrong:[],startTime:new Date,endTime:null}),o=w(S.getQuiz(x.params.id)),y=N(),l=w(0),n=r(()=>o.value.questions[l.value]),q=r(()=>{var t;const e=n.value;if(e.type=="matching"){const a=e.answer||{},p=e.solution||{};return Object.keys(a).length===Object.keys(p).length}return((t=o.value.questions[l.value])==null?void 0:t.answer)!=null}),I=r(()=>{var e;return((e=o.value.questions[l.value])==null?void 0:e.hint)!=null}),j=()=>{alert(o.value.questions[l.value].hint)},v=w(!1),C=()=>{if(n.value.type==="matching"){const e=n.value.solution||{},t=n.value.answer||{};return Object.keys(e).length!==Object.keys(t).length?!1:(k(),!0)}if(n.value.type=="multiple-answer"){const e=n.value.solution||[],t=n.value.answer||[];return e.every(a=>t.includes(a))}if(n.value.type=="ordering"){const e=n.value.solution||[],t=n.value.answer||[];return e.every((a,p)=>a===t[p])}return n.value.answer===E.value},E=r(()=>n.value.solution),R=r(()=>{const e=n.value;if(e.type==="multiple-choice")return e.options[e.solution];if(e.type==="multiple-answer")return e.solution.map(t=>e.options[t]).join(", ");if(e.type==="true-false")return e.solution?"True":"False";if(["text-answer","number-answer"].includes(e.type))return e.solution;if(e.type==="ordering")return e.solution.join(", ")}),k=()=>{v.value=!1,l.value++,B()},g=r(()=>l.value===o.value.questions.length),B=()=>{g.value&&(i.value.endTime=new Date,f.resetStreak(),f.addRun(i.value))},O=()=>{if(l.value===0){y.push("/");return}confirm("Are you sure you want to quit?")&&y.push("/")},T=()=>{v.value=!0;const e=n.value.id;if(C()){i.value.correct.push(e),f.addToStreak();return}i.value.wrong.push(e),f.resetStreak(),o.value.questions.filter(t=>t.id===e).length===1&&(o.value.questions.push(n.value),delete o.value.questions[o.value.questions.length-1].answer)},M=r(()=>{if(i.value.endTime==null)return 0;const e=i.value.endTime.getTime()-i.value.startTime.getTime(),t=Math.floor(e/1e3),a=Math.floor(t/60),p=(t-a*60).toString().padStart(2,"0");return`${a}:${p}`});return document.addEventListener("keydown",e=>{if(e.key==="Enter"){if(g.value){y.push("/");return}if(v.value){k();return}if(!q.value)return;T()}}),(e,t)=>(u(),c("div",K,[g.value?(u(),c("div",Z,[ee,s("div",se,[s("div",te,[ne,s("span",oe,b(Math.round(i.value.correct.length/o.value.questions.length*100))+" % ",1)]),s("div",le,[ae,s("span",ue,b(M.value),1)])])])):(u(),c(Q,{key:0},[s("div",P,[s("h1",null,b(o.value.title),1),s("div",U,[s("span",{onClick:O,class:"material-symbols-rounded muted cursor-pointer"},"close"),s("progress",{max:o.value.questions.length,value:l.value+(v.value?1:0)},null,8,X)])]),s("div",Y,[_($,{question:o.value.questions[l.value],disabled:v.value},null,8,["question","disabled"])])],64)),s("div",ie,[g.value?(u(),c("div",ce,[_(h,{class:"left",label:"Review Lesson",type:"minimal-grey"}),_(h,{class:"right",label:"Continue",type:"submit",onClick:t[0]||(t[0]=a=>V(y).push("/"))})])):v.value?(u(),c("div",de,[C()?(u(),c("div",ve,[_e,he,s("div",pe,[_(h,{label:"Continue",type:"submit",onClick:k})])])):(u(),c("div",me,[fe,s("div",ye,[ke,s("p",null,b(R.value),1)]),s("div",ge,[_(h,{label:"Continue",type:"action-red",onClick:k})])]))])):(u(),c("div",re,[I.value?(u(),L(h,{key:0,class:"left",icon:"lightbulb",label:"Show Tip",type:"minimal-blue",onClick:j})):A("",!0),_(h,{class:"right",label:"Check",type:"submit",disabled:!q.value,onClick:T},null,8,["disabled"])]))])]))}});const Te=H(we,[["__scopeId","data-v-793338fa"]]);export{Te as default};
