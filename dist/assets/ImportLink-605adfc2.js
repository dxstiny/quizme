import{d as B,k as j,n as q,a as L,j as p,l as V,b as G,w as P,o,e,f as n,t as h,a3 as R,F as T,r as E,q as a,I as l,g as f,h as F,x as H,p as M,i as D,_ as W}from"./index-75846edf.js";import{_ as Y}from"./WithSidebar.vue_vue_type_style_index_0_lang-ffdfa64c.js";const d=_=>(M("data-v-12bb1214"),_=_(),D(),_),z={class:"wrap"},J={key:0,class:"flex-col"},K={key:0,class:"text-muted italic text-sm"},O={key:1,class:"mt-4 w-max flex flex-col gap-4"},Q={class:"items"},U={class:"card flex gap-2 items-center"},X={class:"flex flex-col"},Z={class:"text-muted"},ee={class:"mt-4 text-muted text-sm uppercase italic"},te={class:"buttons flex gap-2"},se={key:1,class:"error flex-col"},oe=d(()=>e("h1",null,"Guess you'll have to create it yourself...",-1)),ne=d(()=>e("p",null," No course was found at the link you provided. The course may have been deleted or the link may be incorrect. ",-1)),ae={class:"flex gap-2"},le={key:2,class:"error flex-col"},ce=d(()=>e("h1",null,"Not Allowed",-1)),ie=d(()=>e("p",null,"You don't have permission to view this course.",-1)),re={class:"card"},ue=d(()=>e("p",null,"Wait, this is my Gist!",-1)),de=["value"],_e=B({__name:"ImportLink",setup(_){const x=j(),c=q(),g=L(),y=p(""),i=p([]),r=p(null),v=p("");V(async()=>{const u=x.params.id,t=atob(u),[s,...N]=t.split(":");if(s==="gist"){const[b,I,$]=N,S=`https://gist.githubusercontent.com/${b}/${I}/raw/${$}`,m=await fetch(S);if(m.status==404){r.value="not-found";return}else if(m.status==403){r.value="not-allowed";return}const A=await m.json();i.value=[A],y.value=b}});const k=async()=>{await g.addCourse(i.value[0]),c.push(`/courses/${i.value[0].id}`)},w=()=>{const u=Math.random().toString(36).substring(7);g.addCourse({title:"New Course",description:"",questions:[],id:u}),c.push(`/courses/${u}`)},C=()=>{H.setPat(v.value),window.location.reload()};return(u,t)=>(o(),G(Y,null,{default:P(()=>[e("div",z,[r.value==null?(o(),n("div",J,[e("span",null,[e("strong",null,h(y.value),1),R(" wants to share: ")]),i.value.length==0?(o(),n("span",K,"Nothing")):(o(),n("div",O,[e("div",Q,[(o(!0),n(T,null,E(i.value,s=>(o(),n("div",U,[e("div",X,[e("h1",null,h(s.title),1),e("span",Z,h(s.description),1),e("span",ee,h(s.questions.length)+" questions ",1)])]))),256))]),e("div",te,[a(l,{type:"action-green",icon:"check",label:"Accept",onClick:k}),a(l,{type:"action-red",icon:"close",label:"Reject",onClick:t[0]||(t[0]=s=>f(c).push("/"))})])]))])):r.value=="not-found"?(o(),n("div",se,[oe,ne,e("div",ae,[a(l,{type:"action-green",icon:"add",label:"Create New Course",onClick:w}),a(l,{icon:"home",label:"Home",onClick:t[1]||(t[1]=s=>f(c).push("/"))})])])):r.value=="not-allowed"?(o(),n("div",le,[ce,ie,e("div",re,[ue,e("input",{type:"text",value:v.value,placeholder:"Enter your GitHub PAT here"},null,8,de),a(l,{type:"action-green",icon:"check",label:"Accept",onClick:C,disabled:!v.value.length},null,8,["disabled"])]),a(l,{type:"action-red",icon:"close",label:"Close",onClick:t[2]||(t[2]=s=>f(c).push("/"))})])):F("",!0)])]),_:1}))}});const ve=W(_e,[["__scopeId","data-v-12bb1214"]]);export{ve as default};
