import{_ as M}from"./Question.vue_vue_type_script_setup_true_lang-7d4ccf0b.js";import{I as _}from"./IconButton-84ca49d4.js";import{d as $,u as z,r as k,e as D,f as r,g as i,F,b as s,t as w,h,i as N,c as Q,j as V,o as u,p as L,a as A}from"./index-b07a7f4c.js";import{u as W}from"./course-e2dea657.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const d=m=>(L("data-v-a79c37c1"),m=m(),A(),m),H={class:"quiz"},J={class:"header"},K={class:"flex gap-2"},P=["max","value"],U={class:"body"},X={key:1,class:"end"},Y=d(()=>s("h1",null,"Well done!",-1)),Z={class:"review"},ee={class:"score"},se=d(()=>s("span",null,"SCORE",-1)),te={class:"value"},ne={class:"time"},oe=d(()=>s("span",null,"TIME",-1)),le={class:"value"},ae={class:"footer"},ue={key:0,class:"check"},ie={key:1,class:"check"},ce={key:2,class:"checking"},re={key:0,class:"correct"},de=d(()=>s("div",{class:"continue"},[s("div",{class:"icon"},[s("span",{class:"material-symbols-rounded"},"check")])],-1)),ve=d(()=>s("div",{class:"text"},[s("h2",null,"Correct!")],-1)),_e={class:"continue"},he={key:1,class:"wrong"},pe=d(()=>s("div",{class:"continue"},[s("div",{class:"icon"},[s("span",{class:"material-symbols-rounded"},"close")])],-1)),me={class:"text"},fe=d(()=>s("h2",null,"Correct solution:",-1)),ye={class:"continue"},ge=$({__name:"index",setup(m){const x=z(),T=W(),c=k({correct:[],wrong:[],startTime:new Date,endTime:null}),o=k(T.getQuiz(x.params.id)),f=D(),l=k(0),n=r(()=>o.value.questions[l.value]),b=r(()=>{var t;const e=n.value;if(e.type=="matching"){const a=e.answer||{},p=e.solution||{};return Object.keys(a).length===Object.keys(p).length}return((t=o.value.questions[l.value])==null?void 0:t.answer)!=null}),S=r(()=>{var e;return((e=o.value.questions[l.value])==null?void 0:e.hint)!=null}),I=()=>{alert(o.value.questions[l.value].hint)},v=k(!1),q=()=>{if(n.value.type==="matching"){const e=n.value.solution||{},t=n.value.answer||{};return Object.keys(e).length!==Object.keys(t).length?!1:(y(),!0)}if(n.value.type=="multiple-answer"){const e=n.value.solution||[],t=n.value.answer||[];return e.every(a=>t.includes(a))}if(n.value.type=="ordering"){const e=n.value.solution||[],t=n.value.answer||[];return e.every((a,p)=>a===t[p])}return n.value.answer===j.value},j=r(()=>n.value.solution),E=r(()=>{const e=n.value;if(e.type==="multiple-choice")return e.options[e.solution];if(e.type==="multiple-answer")return e.solution.map(t=>e.options[t]).join(", ");if(e.type==="true-false")return e.solution?"True":"False";if(["text-answer","number-answer"].includes(e.type))return e.solution;if(e.type==="ordering")return e.solution.join(", ")}),y=()=>{v.value=!1,l.value++,B()},g=r(()=>l.value===o.value.questions.length),B=()=>{g.value&&(c.value.endTime=new Date)},O=()=>{if(l.value===0){f.push("/");return}confirm("Are you sure you want to quit?")&&f.push("/")},C=()=>{v.value=!0;const e=n.value.id;if(q()){c.value.correct.push(e);return}c.value.wrong.push(e),o.value.questions.filter(t=>t.id===e).length===1&&(o.value.questions.push(n.value),delete o.value.questions[o.value.questions.length-1].answer)},R=r(()=>{if(c.value.endTime==null)return 0;const e=c.value.endTime.getTime()-c.value.startTime.getTime(),t=Math.floor(e/1e3),a=Math.floor(t/60),p=(t-a*60).toString().padStart(2,"0");return`${a}:${p}`});return document.addEventListener("keydown",e=>{if(e.key==="Enter"){if(g.value){f.push("/");return}if(v.value){y();return}if(!b.value)return;C()}}),(e,t)=>(u(),i("div",H,[g.value?(u(),i("div",X,[Y,s("div",Z,[s("div",ee,[se,s("span",te,w(Math.round(c.value.correct.length/o.value.questions.length*100))+" % ",1)]),s("div",ne,[oe,s("span",le,w(R.value),1)])])])):(u(),i(F,{key:0},[s("div",J,[s("h1",null,w(o.value.title),1),s("div",K,[s("span",{onClick:O,class:"material-symbols-rounded muted cursor-pointer"},"close"),s("progress",{max:o.value.questions.length,value:l.value+(v.value?1:0)},null,8,P)])]),s("div",U,[h(M,{question:o.value.questions[l.value],disabled:v.value},null,8,["question","disabled"])])],64)),s("div",ae,[g.value?(u(),i("div",ue,[h(_,{class:"left",label:"Review Lesson",type:"minimal-grey"}),h(_,{class:"right",label:"Continue",type:"submit",onClick:t[0]||(t[0]=a=>N(f).push("/"))})])):v.value?(u(),i("div",ce,[q()?(u(),i("div",re,[de,ve,s("div",_e,[h(_,{label:"Continue",type:"submit",onClick:y})])])):(u(),i("div",he,[pe,s("div",me,[fe,s("p",null,w(E.value),1)]),s("div",ye,[h(_,{label:"Continue",type:"action-red",onClick:y})])]))])):(u(),i("div",ie,[S.value?(u(),Q(_,{key:0,class:"left",icon:"lightbulb",label:"Show Tip",type:"minimal-blue",onClick:I})):V("",!0),h(_,{class:"right",label:"Check",type:"submit",disabled:!b.value,onClick:C},null,8,["disabled"])]))])]))}});const xe=G(ge,[["__scopeId","data-v-a79c37c1"]]);export{xe as default};
