import{d as w,e as C,r as _,o as N,bQ as I,g as S,h as $,n as A,s as B,a as o,b as e,c as n,t as h,H as V,F as j,i as q,k as l,I as c,j as m,l as G,x as H,p as L,m as P,_ as R}from"./index-D-7qE5hs.js";import{_ as T}from"./WithSidebar.vue_vue_type_style_index_0_lang----b3IkS.js";const u=d=>(L("data-v-3c23d2bd"),d=d(),P(),d),E={class:"wrap"},F={key:0,class:"flex-col"},M={key:0,class:"text-muted italic text-sm"},D={key:1,class:"mt-4 w-max flex flex-col gap-4"},O={class:"items"},Q={class:"card flex gap-2 items-center"},W={class:"flex flex-col"},Y={class:"text-muted"},z={class:"mt-4 text-muted text-sm uppercase italic"},J={class:"buttons flex gap-2"},K={key:1,class:"error flex-col"},U=u(()=>e("h1",null,"Guess you'll have to create it yourself...",-1)),X=u(()=>e("p",null," No course was found at the link you provided. The course may have been deleted or the link may be incorrect. ",-1)),Z={class:"flex gap-2"},ee={key:2,class:"error flex-col"},te=u(()=>e("h1",null,"Not Allowed",-1)),se=u(()=>e("p",null,"You don't have permission to view this course.",-1)),oe={class:"card"},ne=u(()=>e("p",null,"Wait, this is my Gist!",-1)),ae=["value"],le=w({__name:"ImportLink",setup(d){const f=A(),i=B(),x=C(),k=_(""),r=_([]),p=_(null),v=_("");N(async()=>{const t=f.params.id,s=await I(t);if(s.error){p.value=s.error;return}r.value=[s.course],k.value=s.author??"(unknown)"});const y=async()=>{const t=r.value[0];t.remote??(t.remote=[]),t.remote.push({identifier:f.params.id}),await x.addCourse(t),i.push(`/courses/${r.value[0].id}`)},b=()=>{const t=Math.random().toString(36).substring(7);x.addCourse({title:"New Course",description:"",questions:[],id:t}),i.push(`/courses/${t}`)},g=()=>{H.setPat(v.value),window.location.reload()};return(t,s)=>(o(),S(T,null,{default:$(()=>[e("div",E,[p.value==null?(o(),n("div",F,[e("span",null,[e("strong",null,h(k.value),1),V(" wants to share: ")]),r.value.length==0?(o(),n("span",M,"Nothing")):(o(),n("div",D,[e("div",O,[(o(!0),n(j,null,q(r.value,a=>(o(),n("div",Q,[e("div",W,[e("h1",null,h(a.title),1),e("span",Y,h(a.description),1),e("span",z,h(a.questions.length)+" questions ",1)])]))),256))]),e("div",J,[l(c,{type:"action-green",icon:"check",label:"Accept",onClick:y}),l(c,{type:"action-red",icon:"close",label:"Reject",onClick:s[0]||(s[0]=a=>m(i).push("/"))})])]))])):p.value=="not-found"?(o(),n("div",K,[U,X,e("div",Z,[l(c,{type:"action-green",icon:"add",label:"Create New Course",onClick:b}),l(c,{icon:"home",label:"Home",onClick:s[1]||(s[1]=a=>m(i).push("/"))})])])):p.value=="not-allowed"?(o(),n("div",ee,[te,se,e("div",oe,[ne,e("input",{type:"text",value:v.value,placeholder:"Enter your GitHub PAT here"},null,8,ae),l(c,{type:"action-green",icon:"check",label:"Accept",onClick:g,disabled:!v.value.length},null,8,["disabled"])]),l(c,{type:"action-red",icon:"close",label:"Close",onClick:s[2]||(s[2]=a=>m(i).push("/"))})])):G("",!0)])]),_:1}))}}),re=R(le,[["__scopeId","data-v-3c23d2bd"]]);export{re as default};
